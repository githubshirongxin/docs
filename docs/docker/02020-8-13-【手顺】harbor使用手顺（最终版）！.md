---
layout: post
title: 【手顺】harbor使用手顺（最终版20200813）
---

### Step1 .配置本地docker的根证书
https://gitlab.ccbjb.com.cn/ec7mongrp/common
下载harbor.ccbjb.com.cn证书/root.crt
```bash
# mkdir -p /etc/docker/certs.d/harbor.ccbjb.com.cn
```

把root.crt放到`/etc/docker/certs.d/harbor.ccbjb.com.cn`
windows：放到哪？TODO

### Step2. 掌握自己的harbor私有仓库的用户名和密码
BJB就是公司的邮箱的前面ID

### Step3-A. 在命令行中使用

::: warning 记住
 1. harbor只能下载我们自己传上去的镜像，不会自动下载私有仓库中不存在的镜像。
 2. pull 和push的时候必须带上harbor.ccbjb.com.cn
 3. 镜像前面必须有项目名，例如library，具体是什么名字，需要在浏览器上进入harbor页面查看。
:::

```bash
# docker login -u 你的用户id hargbor.ccbjb.com.cn
password:

# docker pull harbor.ccbjb.com.cn/library/maven:latest

# docker tag alpine:latest harbor.ccbjb.com.cn/library/maven:latest
# docker push harbor.ccbjb.com.cn/library/maven:latest
```


### Step3-B. 在浏览器上使用查找镜像
https://harbor.ccbjb.com.cn
输入你自己的用户名和密码

提示不安全的网站，你可以双击下载的root.crt.
为了浏览器能够不提示“不安全，是否继续”

#### 安装根证书(可选)：
- 双击根dao证书文件 弹出证du书属性的对话框，此zhi时该根证书并不受信任，我们dao需要将其加入“版受信任的根证书颁发机权构”
- 步骤二：点击“安装证书”，弹出证书导入向导
- 步骤三：点击下一步，选择证书的存储区
- 步骤四：选择“将所有的证书放入下列存储区”，然后点击下一步，选择证书存储
- 步骤五：在“选择证书存储”对话框中选择“受信任的根证书颁发机构”，点击确定，此时返回到证书导入向导页面
- 步骤六：在证书导入向导页面，证书存储变为“受信任的根证书颁发机构”，点击下一步
- 步骤七：点击“完成”，此时会弹出安全警告 步骤八：点击“是”，安装该证书。此时所有操作完成，成功将根证书加入“受信任的根证书颁发机构”。

#### 网站上查找镜像
上面有检索框。
镜像仓库也可以点击人肉搜索。
![](/docs/images/2020-08-13-11-24-47.png)


完。


