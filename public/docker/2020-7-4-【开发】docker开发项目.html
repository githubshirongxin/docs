<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【docker开发】快速搭建开发环境 | 共享</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/docs/logo.png">
    <link rel="icon" href="/docs/logo.png">
    <link rel="manifest" href="/docs/manifest.json">
    <link rel="apple-touch-icon" href="/docs/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/docs/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="共享库">
    <meta name="name" content="cjb的资料库">
    <meta name="keywords" content="java,cobol,分布式存储">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/docs/assets/css/0.styles.27bfdfe7.css" as="style"><link rel="preload" href="/docs/assets/js/app.6e55b747.js" as="script"><link rel="preload" href="/docs/assets/js/5.379e7eff.js" as="script"><link rel="preload" href="/docs/assets/js/2.28087ae7.js" as="script"><link rel="preload" href="/docs/assets/js/21.06653c04.js" as="script"><link rel="preload" href="/docs/assets/js/3.32492e15.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.a8c07073.js"><link rel="prefetch" href="/docs/assets/js/100.f691b998.js"><link rel="prefetch" href="/docs/assets/js/101.95504fdb.js"><link rel="prefetch" href="/docs/assets/js/102.40abdd12.js"><link rel="prefetch" href="/docs/assets/js/103.6718ba31.js"><link rel="prefetch" href="/docs/assets/js/104.11bda7cb.js"><link rel="prefetch" href="/docs/assets/js/105.1a6c292b.js"><link rel="prefetch" href="/docs/assets/js/106.fa53759d.js"><link rel="prefetch" href="/docs/assets/js/107.3b64ec12.js"><link rel="prefetch" href="/docs/assets/js/108.4f8cc558.js"><link rel="prefetch" href="/docs/assets/js/109.8af9d095.js"><link rel="prefetch" href="/docs/assets/js/11.a1fe48fc.js"><link rel="prefetch" href="/docs/assets/js/110.c0b7140e.js"><link rel="prefetch" href="/docs/assets/js/111.2324c77d.js"><link rel="prefetch" href="/docs/assets/js/112.dc2637ea.js"><link rel="prefetch" href="/docs/assets/js/113.8b9b71c9.js"><link rel="prefetch" href="/docs/assets/js/114.6a9ceeff.js"><link rel="prefetch" href="/docs/assets/js/115.8fe89cff.js"><link rel="prefetch" href="/docs/assets/js/116.f342e4a1.js"><link rel="prefetch" href="/docs/assets/js/117.4620477a.js"><link rel="prefetch" href="/docs/assets/js/118.7981b3f5.js"><link rel="prefetch" href="/docs/assets/js/119.2ca384f1.js"><link rel="prefetch" href="/docs/assets/js/12.cd4e8d90.js"><link rel="prefetch" href="/docs/assets/js/120.540d1f9b.js"><link rel="prefetch" href="/docs/assets/js/121.b5c5d382.js"><link rel="prefetch" href="/docs/assets/js/122.150bd431.js"><link rel="prefetch" href="/docs/assets/js/123.6e43e320.js"><link rel="prefetch" href="/docs/assets/js/124.fdf50321.js"><link rel="prefetch" href="/docs/assets/js/125.c448ac7e.js"><link rel="prefetch" href="/docs/assets/js/126.8a9f6a47.js"><link rel="prefetch" href="/docs/assets/js/127.a865ae13.js"><link rel="prefetch" href="/docs/assets/js/128.04fcb4f2.js"><link rel="prefetch" href="/docs/assets/js/129.45ffba0e.js"><link rel="prefetch" href="/docs/assets/js/13.4b9ad952.js"><link rel="prefetch" href="/docs/assets/js/130.579326b1.js"><link rel="prefetch" href="/docs/assets/js/131.ed79563d.js"><link rel="prefetch" href="/docs/assets/js/14.7e60c2ed.js"><link rel="prefetch" href="/docs/assets/js/15.367ac9f7.js"><link rel="prefetch" href="/docs/assets/js/16.06233627.js"><link rel="prefetch" href="/docs/assets/js/17.d1bf7fd6.js"><link rel="prefetch" href="/docs/assets/js/18.d93731a4.js"><link rel="prefetch" href="/docs/assets/js/19.01badb85.js"><link rel="prefetch" href="/docs/assets/js/20.64ff113b.js"><link rel="prefetch" href="/docs/assets/js/22.bf6cb808.js"><link rel="prefetch" href="/docs/assets/js/23.a9bcc779.js"><link rel="prefetch" href="/docs/assets/js/24.2740b2d2.js"><link rel="prefetch" href="/docs/assets/js/25.ccde2628.js"><link rel="prefetch" href="/docs/assets/js/26.748a202c.js"><link rel="prefetch" href="/docs/assets/js/27.30ae861c.js"><link rel="prefetch" href="/docs/assets/js/28.1fd6ea1f.js"><link rel="prefetch" href="/docs/assets/js/29.4af5443c.js"><link rel="prefetch" href="/docs/assets/js/30.fcf8467e.js"><link rel="prefetch" href="/docs/assets/js/31.7ac5aaa5.js"><link rel="prefetch" href="/docs/assets/js/32.e6ce87f2.js"><link rel="prefetch" href="/docs/assets/js/33.c132c1a9.js"><link rel="prefetch" href="/docs/assets/js/34.60dc99c0.js"><link rel="prefetch" href="/docs/assets/js/35.c971ca86.js"><link rel="prefetch" href="/docs/assets/js/36.b666a590.js"><link rel="prefetch" href="/docs/assets/js/37.47f1df6a.js"><link rel="prefetch" href="/docs/assets/js/38.9cc8507d.js"><link rel="prefetch" href="/docs/assets/js/39.0af0b115.js"><link rel="prefetch" href="/docs/assets/js/4.19274861.js"><link rel="prefetch" href="/docs/assets/js/40.f2dcfd11.js"><link rel="prefetch" href="/docs/assets/js/41.49ede3e2.js"><link rel="prefetch" href="/docs/assets/js/42.56dbce72.js"><link rel="prefetch" href="/docs/assets/js/43.ffa70e8d.js"><link rel="prefetch" href="/docs/assets/js/44.6a546718.js"><link rel="prefetch" href="/docs/assets/js/45.ac09bf10.js"><link rel="prefetch" href="/docs/assets/js/46.758ee881.js"><link rel="prefetch" href="/docs/assets/js/47.e2e35ac5.js"><link rel="prefetch" href="/docs/assets/js/48.b5c84a0a.js"><link rel="prefetch" href="/docs/assets/js/49.a235999a.js"><link rel="prefetch" href="/docs/assets/js/50.300c683b.js"><link rel="prefetch" href="/docs/assets/js/51.76819f93.js"><link rel="prefetch" href="/docs/assets/js/52.3ad409ec.js"><link rel="prefetch" href="/docs/assets/js/53.7c3a1c31.js"><link rel="prefetch" href="/docs/assets/js/54.bc9bcd5e.js"><link rel="prefetch" href="/docs/assets/js/55.3bc6e3af.js"><link rel="prefetch" href="/docs/assets/js/56.9b082ef4.js"><link rel="prefetch" href="/docs/assets/js/57.5ed9bd17.js"><link rel="prefetch" href="/docs/assets/js/58.ade6fb92.js"><link rel="prefetch" href="/docs/assets/js/59.23455a7b.js"><link rel="prefetch" href="/docs/assets/js/6.d4972abb.js"><link rel="prefetch" href="/docs/assets/js/60.4484b3e7.js"><link rel="prefetch" href="/docs/assets/js/61.f608a58c.js"><link rel="prefetch" href="/docs/assets/js/62.0251cff2.js"><link rel="prefetch" href="/docs/assets/js/63.5886cbca.js"><link rel="prefetch" href="/docs/assets/js/64.06d3cb7c.js"><link rel="prefetch" href="/docs/assets/js/65.e7c31045.js"><link rel="prefetch" href="/docs/assets/js/66.f3405a17.js"><link rel="prefetch" href="/docs/assets/js/67.f8032304.js"><link rel="prefetch" href="/docs/assets/js/68.8d124d81.js"><link rel="prefetch" href="/docs/assets/js/69.a2e0530c.js"><link rel="prefetch" href="/docs/assets/js/7.9affb0fc.js"><link rel="prefetch" href="/docs/assets/js/70.6d501178.js"><link rel="prefetch" href="/docs/assets/js/71.8d32deb5.js"><link rel="prefetch" href="/docs/assets/js/72.b24f7dd9.js"><link rel="prefetch" href="/docs/assets/js/73.715d8f9e.js"><link rel="prefetch" href="/docs/assets/js/74.19c2aa3e.js"><link rel="prefetch" href="/docs/assets/js/75.d8b9b1a0.js"><link rel="prefetch" href="/docs/assets/js/76.4b895d60.js"><link rel="prefetch" href="/docs/assets/js/77.7c1850d1.js"><link rel="prefetch" href="/docs/assets/js/78.ccc1066a.js"><link rel="prefetch" href="/docs/assets/js/79.efc920cf.js"><link rel="prefetch" href="/docs/assets/js/8.2d653edf.js"><link rel="prefetch" href="/docs/assets/js/80.1faebb0f.js"><link rel="prefetch" href="/docs/assets/js/81.03b8bc03.js"><link rel="prefetch" href="/docs/assets/js/82.b6022252.js"><link rel="prefetch" href="/docs/assets/js/83.92c1422f.js"><link rel="prefetch" href="/docs/assets/js/84.569da873.js"><link rel="prefetch" href="/docs/assets/js/85.13ea5733.js"><link rel="prefetch" href="/docs/assets/js/86.11f3ac49.js"><link rel="prefetch" href="/docs/assets/js/87.8b1ce2e7.js"><link rel="prefetch" href="/docs/assets/js/88.f0a2995c.js"><link rel="prefetch" href="/docs/assets/js/89.54fe35f8.js"><link rel="prefetch" href="/docs/assets/js/9.2dd78087.js"><link rel="prefetch" href="/docs/assets/js/90.d78f6a18.js"><link rel="prefetch" href="/docs/assets/js/91.aa1cf114.js"><link rel="prefetch" href="/docs/assets/js/92.4a218073.js"><link rel="prefetch" href="/docs/assets/js/93.990f6166.js"><link rel="prefetch" href="/docs/assets/js/94.c32b4e33.js"><link rel="prefetch" href="/docs/assets/js/95.3d42890a.js"><link rel="prefetch" href="/docs/assets/js/96.b431e07a.js"><link rel="prefetch" href="/docs/assets/js/97.b205777f.js"><link rel="prefetch" href="/docs/assets/js/98.ad6f5a44.js"><link rel="prefetch" href="/docs/assets/js/99.69f02348.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.27bfdfe7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.png" alt="共享" class="logo"> <span class="site-name can-hide">共享</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="linux-powshell" class="dropdown-title"><span class="title">linux-powshell</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/linux-powshell/" class="nav-link">
  linux-powshell
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="elasticSearch" class="dropdown-title"><span class="title">elasticSearch</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/elasticSearch/" class="nav-link">
  elasticSearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="maven-nexus" class="dropdown-title"><span class="title">maven-nexus</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/maven-nexus/" class="nav-link">
  maven-nexus
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vuepress" class="dropdown-title"><span class="title">vuepress</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vuepress/" class="nav-link">
  vuepress
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="docker" class="dropdown-title"><span class="title">docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/docker/" class="nav-link router-link-active">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="gitlab" class="dropdown-title"><span class="title">gitlab</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/gitlab/" class="nav-link">
  gitlab
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vscode" class="dropdown-title"><span class="title">vscode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vscode/" class="nav-link">
  vscode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高可用系统" class="dropdown-title"><span class="title">高可用系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/高可用系统/" class="nav-link">
  高可用系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NFS" class="dropdown-title"><span class="title">NFS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/NFS/" class="nav-link">
  NFS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="git" class="dropdown-title"><span class="title">git</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/git/" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="k8s" class="dropdown-title"><span class="title">k8s</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/k8s/" class="nav-link">
  k8s
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="linux-powshell" class="dropdown-title"><span class="title">linux-powshell</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/linux-powshell/" class="nav-link">
  linux-powshell
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="elasticSearch" class="dropdown-title"><span class="title">elasticSearch</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/elasticSearch/" class="nav-link">
  elasticSearch
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="maven-nexus" class="dropdown-title"><span class="title">maven-nexus</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/maven-nexus/" class="nav-link">
  maven-nexus
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vuepress" class="dropdown-title"><span class="title">vuepress</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vuepress/" class="nav-link">
  vuepress
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="docker" class="dropdown-title"><span class="title">docker</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/docker/" class="nav-link router-link-active">
  docker
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="gitlab" class="dropdown-title"><span class="title">gitlab</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/gitlab/" class="nav-link">
  gitlab
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="vscode" class="dropdown-title"><span class="title">vscode</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/vscode/" class="nav-link">
  vscode
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="高可用系统" class="dropdown-title"><span class="title">高可用系统</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/高可用系统/" class="nav-link">
  高可用系统
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="NFS" class="dropdown-title"><span class="title">NFS</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/NFS/" class="nav-link">
  NFS
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="git" class="dropdown-title"><span class="title">git</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/git/" class="nav-link">
  git
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="k8s" class="dropdown-title"><span class="title">k8s</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/k8s/" class="nav-link">
  k8s
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>docker</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/docker/02020-8-13-【手顺】harbor使用手顺（最终版）！.html" class="sidebar-link">【手顺】harbor使用手顺（最终版20200813）</a></li><li><a href="/docs/docker/2020-7-4-docker化mysql.html" class="sidebar-link">【docker】 启动mysql容器</a></li><li><a href="/docs/docker/2020-7-4-docker常用命令.html" class="sidebar-link">【docker】最常用几个命令</a></li><li><a href="/docs/docker/2020-7-4-【安装】docker+centos7.html" class="sidebar-link">【docker安装】Centos7安装最新版本docker</a></li><li><a href="/docs/docker/2020-7-4-【安装】docker+win10.html" class="sidebar-link">【安装】docker+win10</a></li><li><a href="/docs/docker/2020-7-4-【安装】docker-compose+centos7.html" class="sidebar-link">【docker-compose安装】centos7 安装docker-compose</a></li><li><a href="/docs/docker/2020-7-4-【安装】docker私有镜像库registry.html" class="sidebar-link">【registry安装】centos7安装docker私有镜像库（有了Harbor就不用它了）</a></li><li><a href="/docs/docker/2020-7-4-【开发】docker-compose开发项目.html" class="sidebar-link">【docker-compose开发】docker-compose 打包部署各种语言开发环境（持续更新中）</a></li><li><a href="/docs/docker/2020-7-4-【开发】docker开发项目.html" class="active sidebar-link">【docker开发】快速搭建开发环境</a></li><li><a href="/docs/docker/2020-7-4-【部署】harbor分布式部署.html" class="sidebar-link">【harbor分布式部署】nginx反向代理harbor两节点共享NFS存储、DB，弱可用Harobor部署（后续改善）</a></li><li><a href="/docs/docker/2020-7-4-【部署】harbor单机部署.html" class="sidebar-link">【harbor单机部署】harbor 单机https安装（成功安装）</a></li><li><a href="/docs/docker/2020-8-11-registry资料.html" class="sidebar-link">【registry资料】</a></li><li><a href="/docs/docker/2020-8-12-harbor问题：push retrying.html" class="sidebar-link">【harbor问题： push retrying】 一直retrying （已解决）</a></li><li><a href="/docs/docker/" aria-current="page" class="sidebar-link">【docker相关】 Develop your app with docker.</a></li><li><a href="/docs/docker/docker【课题】.html" class="sidebar-link">【docker课题】</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>【转载】公众号: 小哈学Java，专注分享Java领域干货文章分享</p> <p>小哈今天给大家分享的主题是，如何通过 Docker 快速搭建各种测试环境，本文列举的，也是小哈在工作中经常用到的，其中包括 Mysql, Redis, Elasticsearch, MongoDB 安装步骤, 通过几行命令秒秒钟就能轻松搞定。</p> <p>友情提示：搭建之前，你需要先安装 Docker 哟，本文基于您已经安装好 Docker 的基础上！</p> <p>废话少说，正文开始！</p> <p>目录</p> <p>一、镜像加速</p> <p>二、快速安装&amp;搭建 Mysql 环境</p> <p>三、快速安装&amp;搭建 Redis 环境</p> <p>四、快速安装&amp;搭建 MongDB 环境</p> <p>五、快速安装&amp;搭建 Elasticsearch 环境</p> <p>六、总结</p> <p>一、镜像加速</p> <p>Docker 默认是从官方镜像地址 Docker Hub 下下载镜像，由于服务器在国外的缘故，导致经常下载速度非常慢。为了提升镜像的下载速度，我们可以手动配置国内镜像加速器，让下载速度飚起来。</p> <p>国内的镜像加速器选项较多，如：阿里云，DaoCloud 等。</p> <p>本文主要说说如何配置阿里云的镜像加速器。</p> <p>2.1 登录阿里云获取加速信息</p> <p>首先你需要注册一个阿里云账号，没有的话，通过下面的连接跳转注册：</p> <p>https://dev.aliyun.com/</p> <p>跳转镜像加速页 https://cr.console.aliyun.com/，获取加速配置信息：</p> <p><img src="https://upload-images.jianshu.io/upload_images/18287449-2629ce90d57c7b29.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="">
2.2 配置 Docker</p> <p>2.2.1 确定 Docker Client 版本</p> <p>在配置之前，首先需要确定 Docker Client 的版本，推荐是 1.10.0+:
<img src="https://upload-images.jianshu.io/upload_images/18287449-3146e7d88b45ac8d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>2.2.2 配置镜像加速器</p> <p>PS: 这里以 CentOS 系统为例，如果你是别的系统，可以参考阿里云配置加速器官方文档。</p> <p>通过修改 daemon 配置文件 /etc/docker/daemon.json 来使用加速器：</p> <p>执行下面命令：</p> <p>sudo mkdir -p /etc/docker</p> <p>sudo tee /etc/docker/daemon.json &lt;&lt;-'EOF'</p> <p>{</p> <p>&quot;registry-mirrors&quot;: [&quot;https://bjtzu1jb.mirror.aliyuncs.com&quot;]</p> <p>}</p> <p>EOF</p> <p>sudo systemctl daemon-reload</p> <p>sudo systemctl restart docker</p> <p>2.3 验证一下速度</p> <p>以下载 mongodb 为例，看下速度：</p> <p><img src="https://upload-images.jianshu.io/upload_images/18287449-1bf7001d7553f58e.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="">
配置了加速器过后，速度终于飚起来了。</p> <p>二、快速安装&amp;搭建 Mysql 环境
本节中，我们将学习如何通过 Docker 快速安装与搭建 Mysql 环境。</p> <p>2.1 下载 Mysql 镜像
这里以 Mysql 5.7 为例：</p> <p>docker pull mysql:5.7</p> <p>下载完成后，通过 docker images 检查一下镜像是否下载成功:
<img src="https://upload-images.jianshu.io/upload_images/18287449-bc03bf54390e6ab5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>2.2 先以最简单方式启动
先以简单的方式启动：</p> <p>docker run -d \</p> <p>--name mysql \</p> <p>-p 3306:3306 \</p> <p>-e MYSQL_ROOT_PASSWORD=123456 \</p> <p>mysql:5.7</p> <p>-d：以后台的方式运行；</p> <p>--name mysql：指定容器的名称为 mysql;</p> <p>-p 3306:3306 将容器的 3306 端口挂载到宿主机的 3306 端口上；</p> <p>-e MYSQL_ROOT_PASSWORD=123456：指定 root 的密码为 123456</p> <p>命令执行完成后，你也可以通过 docker ps命令来确认下容器是否启动成功。若成功，我们需要将容器中的目录文件复制到宿主机中，分别包括：</p> <p>mysql 配置文件；</p> <p>数据存储目录，以便挂载(PS: 若不挂载到宿主机，每次启动容器数据都会丢失)</p> <h1 id="将容器中的-mysql-配置文件复制到宿主机中指定路径下，路径你可以根据需要，自行修改"><a href="#将容器中的-mysql-配置文件复制到宿主机中指定路径下，路径你可以根据需要，自行修改" class="header-anchor">#</a> 将容器中的 mysql 配置文件复制到宿主机中指定路径下，路径你可以根据需要，自行修改</h1> <p>docker cp mysql:/etc/mysql/mysql.conf.d/mysqld.cnf /usr/local/docker/mysql/config</p> <h1 id="将容器中的-mysql-存储目录复制到宿主机中"><a href="#将容器中的-mysql-存储目录复制到宿主机中" class="header-anchor">#</a> 将容器中的 mysql 存储目录复制到宿主机中</h1> <p>docker cp mysql:/var/lib/mysql/ /usr/local/docker/mysql/data</p> <p>完成这一切后，让我们将刚刚运行的容器删除掉。</p> <p>docker rm -f mysql</p> <p>PS: mysql 是我们运行容器时，指定的名称，当然，你也可以先执行 docker ps, 通过容器 ID 来删除。</p> <p>2.3 正式运行 Mysql 容器
接下来，正式运行 Mysql 容器：</p> <p>docker run -d--name mysql-p3306:3306-v /usr/local/docker/mysql/config/mysqld.cnf:/etc/mysql/mysql.conf.d/mysqld.cnf-v /usr/local/docker/mysql/data/mysql:/var/lib/mysql-eMYSQL_ROOT_PASSWORD=123456\mysql:5.7</p> <p>其他不变，额外添加了两个挂载子命令：</p> <p>-v /usr/local/docker/mysql/config/mysqld.cnf:/etc/mysql/mysql.conf.d/mysqld.cnf: 将容器中 /etc/mysql/mysql.conf.d/mysqld.cnf 配置文件挂载到宿主机的 /usr/local/docker/mysql/config/mysqld.cnf 文件上；</p> <p>-v /usr/local/docker/mysql/data:/var/lib/mysql: 将容器中 /var/lib/mysql 数据目录挂载到宿主机的 /usr/local/docker/mysql/data 目录下；</p> <p>执行命令完成后，查看下容器是否启动：</p> <p><img src="https://upload-images.jianshu.io/upload_images/18287449-22d3c9513f9f882a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="">
可以看到，容器运行成功</p> <p>2.4 通过 Mysql 客户端连接一下试试
通过 MySQL 客户端连接刚刚创建的 mysql, 看看能否连接成功：
<img src="https://upload-images.jianshu.io/upload_images/18287449-64a07b89f67f590a.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>连接成功了！</p> <p>三、快速安装&amp;搭建 Redis 环境
本节中，我们将学习如何利用 Docker 安装&amp;搭建 Redis 环境。</p> <p>3.1 下载 Redis 镜像
首先拉取 Redis 镜像, 这里我选择的是 redis:latest ：</p> <p>docker pull redis:latest</p> <p>下载完成后，通过 docker images 确认镜像是否已经下载到本地：</p> <p>3.2 运行 Redis 容器</p> <p>docker run -p 6379:6379 --name redis -v /usr/local/docker/redis/redis.conf:/etc/redis/redis.conf -v /usr/local/docker/redis/data:/data -d redis:latest redis-server /etc/redis/redis.conf --appendonly yes</p> <p>命令说明：</p> <p>-p 6379:6379: 将容器的 6379 端口映射到宿主机的 6379 端口；</p> <p>-v /usr/local/docker/redis/data:/data : 将容器中的 /data 数据存储目录, 挂载到宿主机中 /usr/local/docker/redis/data 目录下；</p> <p>-v /usr/local/docker/redis/redis.conf:/etc/redis/redis.conf ： 将容器中 /etc/redis/redis.conf 配置文件，挂载到宿主机的 /usr/local/docker/redis/redis.conf 文件上；</p> <p>redis-server --appendonly yes: 在容器执行 redis-server 启动命令，并打开 redis 持久化配置;</p> <p>命令运行完成后，查看容器是否启动成功：docker ps</p> <p>可以看到 redis 容器已经启动成功了！</p> <p>3.3 连接刚刚创建好的容器
执行如下命令，连接 redis：</p> <p>docker run -it redis:latest redis-cli -h 172.17.0.1
Could not connect to Redis at 172.17.0.1:6379: No route to host</p> <p>3.4 ，之前的没成功。最后没有持久化地这么两句执行好用。
docker run --name rdb -p 6379:6379 redis</p> <p>docker exec -it rdb redis-cli</p> <p>四、快速安装&amp;搭建 MongDB 环境
本节中，我们将学习如何通过 Docker 快速安装与搭建 MongoDB 环境。</p> <p>4.1 下载 MongoDB 镜像
这里以 mongo 4 版本为例，下载镜像：</p> <p>docker pull mongo:4</p> <p>下载完成后，确认一下镜像是否下载成功:
<img src="https://upload-images.jianshu.io/upload_images/18287449-e0945e67d7d768e2.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>4.2 运行 MongoDB 镜像
下载成功后，运行 mongoDB 镜像：</p> <p>docker run -d --name mongo -v /usr/local/docker/mongo/configdb:/data/configdb -v   /usr/local/docker/mongo/data:/data/db  -p 27017:27017  mongo:4  --auth</p> <p>-d: 以后台的方式运行；
--name mongo: 指定容器名称为 mongo;
-v /usr/local/docker/mongo/configdb:/data/configdb: 将容器中 /data/configdb 目录挂载到宿主机的 /usr/local/docker/mongo/configdb 目录下；</p> <p>-v /usr/local/docker/mongo/data:/data/db: 将容器中 /data/db 数据目录挂载到宿主机的 /usr/local/docker/mongo/data 目录下；</p> <p>-p 27017:27017: 将容器的 27017 端口映射到宿主机的 27017 端口；</p> <p>执行命令完成后，查看下容器是否启动：
<img src="https://upload-images.jianshu.io/upload_images/18287449-600c8490a4597c19.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>4.3 添加管理员账号
执行命令：
dockerexec-it mongo mongo admin</p> <p>然后，创建一个拥有最高权限 root 账号:</p> <p>db.createUser({ user: 'admin', pwd: '123456', roles: [ { role: &quot;root&quot;, db: &quot;admin&quot; } ] });</p> <p>创建成功后，你会看到 Successfully added user:
<img src="https://upload-images.jianshu.io/upload_images/18287449-cbcfea053bf306a7.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>4.4 用新创建的 root 账户连接，测试一下
docker run -it --rm --link mongo:mongo mongo mongo -u admin -p123456--authenticationDatabase admin mongo/admin</p> <p>连接成功后，我们可以执行相关 sql：</p> <p>显示所有的数据库：</p> <p>showdbs</p> <p>使用某个数据库：</p> <p>useadmin
<img src="https://upload-images.jianshu.io/upload_images/18287449-9b59b7a2ac4cd073.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>输入命令 exit，退出连接！</p> <p>五、快速安装&amp;搭建 Elasticsearch 环境
本节中，我们将学习如何通过 Docker 快速安装与搭建 Elasticsearch 环境。</p> <p>5.1 下载 Elasticsearch 镜像
这里以 Elasticsearch 6.5.0 为快速安装&amp;搭建 Elasticsearch 环境例：
<img src="https://upload-images.jianshu.io/upload_images/18287449-83c3a9736befa77d.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="">
docker pull elasticsearch:6.5.0</p> <p>下载完成后，通过 docker images 检查一下镜像是否下载成功:</p> <p>5.2 先简单运行 Elasticsearch 镜像
下载成功后，简单运行 Elasticsearch 镜像：</p> <p>docker run -d \</p> <p>--name es \</p> <p>-p 9200:9200 -p 9300:9300 \</p> <p>-e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms200m -Xmx200m&quot; \</p> <p>elasticsearch:6.5.0</p> <p>-d：以后台的方式运行；</p> <p>--name es：指定容器的名称为 es;</p> <p>-p 9200:9200 -p 9300:9300 将容器的 9200、9300 端口挂载到宿主机的 9200、9300 端口上；</p> <p>-e &quot;discovery.type=single-node&quot; -e ES_JAVA_OPTS=&quot;-Xms200m -Xmx200m&quot;：指定为单节点模式，JVM 内存占用 200m</p> <p>命令执行完成后，你也可以通过 docker ps命令来确认下容器是否启动成功。
<img src="https://upload-images.jianshu.io/upload_images/18287449-7c06d9e48d266064.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>可以看到 es 容器运行成功了，接下来，进入容器中：</p> <p>docker exec -it es /bin/bash</p> <p>安装 analysis-ik 中文分词插件：</p> <p>./bin/elasticsearch-plugin install https://github.com/medcl/elasticsearch-analysis-ik/releases/download/v6.5.0/elasticsearch-analysis-ik-6.5.0.zip</p> <p>PS: es 从 v5.5.1 版本开始支持自带的 es 插件命令来安装，如果你安装的版本不是 6.5.0，需要将命令中的版本号修改一下，具体参考 https://github.com/medcl/elasticsearch-analysis-ik</p> <p><img src="https://upload-images.jianshu.io/upload_images/18287449-5a3668f23a67889c.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="">
安装成功后，退出容器：</p> <p>exit</p> <p>删除刚刚运行的容器：</p> <p>docker rm -f es</p> <p>PS: 当然了，你也可以通过容器的 ID 来删除。</p> <p>5.3 复制相关文件</p> <h1 id="复制-es-配置文件目录到宿主机指定目录，目标目录你可以根据需要，自行修改"><a href="#复制-es-配置文件目录到宿主机指定目录，目标目录你可以根据需要，自行修改" class="header-anchor">#</a> 复制 es 配置文件目录到宿主机指定目录，目标目录你可以根据需要，自行修改</h1> <p>docker cp es:/usr/share/elasticsearch/config /usr/local/docker/es</p> <h1 id="复制-es-持久化数据目录到宿主机指定目录"><a href="#复制-es-持久化数据目录到宿主机指定目录" class="header-anchor">#</a> 复制 es 持久化数据目录到宿主机指定目录</h1> <p>docker cp es:/usr/share/elasticsearch/data /usr/local/docker/es</p> <h1 id="复制-es-插件目录到宿主机指定目录"><a href="#复制-es-插件目录到宿主机指定目录" class="header-anchor">#</a> 复制 es 插件目录到宿主机指定目录</h1> <p>docker cp es:/usr/share/elasticsearch/plugins /usr/local/docker/es</p> <p>5.4 修改 es 相关配置
进入我们刚刚指定的 config 配置目录，修改 jvm.options 文件：</p> <p>-Xms300m</p> <p>-Xmx300m</p> <p>PS: 因为小哈测试服务器就 2G 内存，这里我改成了 JVM 内存占用 300m, 如果你的内存够用，可不用改。</p> <p>修改 elasticsearch.yml文件, 添加如下配置：</p> <p>node.name: master</p> <p>http.cors.enabled: true</p> <p>http.cors.allow-origin: &quot;*&quot;</p> <p>解释一下添加的配置，设置节点为 master 节点，并允许跨域访问，以便后面使用 head 插件图形化界面访问。</p> <p>5.5 运行 Elasticsearch 容器
docker run -d \</p> <p>--name es \</p> <p>-p 9200:9200 -p 9300:9300 \</p> <p>-v /usr/local/docker/es/config:/usr/share/elasticsearch/config \</p> <p>-v /usr/local/docker/es/data:/usr/share/elasticsearch/data \</p> <p>-v /usr/local/docker/es/plugins:/usr/share/elasticsearch/plugins \</p> <p>elasticsearch:6.5.0</p> <p>这次，我们额外添加了相关挂载命令：</p> <p>-v /usr/local/docker/es/config:/usr/share/elasticsearch/config: 将容器中的 /usr/share/elasticsearch/config 配置目录挂载到宿主机的 /usr/local/docker/es/config 目录下；</p> <p>-v /usr/local/docker/es/data:/usr/share/elasticsearch/data： 将容器中的 /usr/share/elasticsearch/data 数据目录挂载到宿主机的 /usr/local/docker/es/data 目录下；</p> <p>-v /usr/local/docker/es/plugins:/usr/share/elasticsearch/plugins：将容器中的 /usr/share/elasticsearch/plugins 插件目录挂载到宿主机的 /usr/local/docker/es/plugins 目录下；</p> <p>5.6 测试一下，瞅瞅 es 是否能够正常访问
测试一下，看 es 是否启动成功：</p> <p>curl http://localhost:9200
<img src="https://upload-images.jianshu.io/upload_images/18287449-ee4f95121e375ed1.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p> <p>OK, 到此 es 的单节点环境就搭建好了！</p> <p>六、总结
好了，到这里，小哈就已经把常用的测试环境搭建介绍完毕了。如果你还有啥疑问，不妨后台私信我！哈哈，祝您看完本文有所收获！</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">8/13/2020, 11:25:30 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/docker/2020-7-4-【开发】docker-compose开发项目.html" class="prev">
        【docker-compose开发】docker-compose 打包部署各种语言开发环境（持续更新中）
      </a></span> <span class="next"><a href="/docs/docker/2020-7-4-【部署】harbor分布式部署.html">
        【harbor分布式部署】nginx反向代理harbor两节点共享NFS存储、DB，弱可用Harobor部署（后续改善）
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.6e55b747.js" defer></script><script src="/docs/assets/js/5.379e7eff.js" defer></script><script src="/docs/assets/js/2.28087ae7.js" defer></script><script src="/docs/assets/js/21.06653c04.js" defer></script><script src="/docs/assets/js/3.32492e15.js" defer></script>
  </body>
</html>
