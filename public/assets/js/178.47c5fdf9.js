(window.webpackJsonp=window.webpackJsonp||[]).push([[178],{593:function(s,n,a){"use strict";a.r(n);var e=a(48),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("注意:需要在本地安装vuepress，否则PWA功能实现不了")]),s._v(" "),a("h2",{attrs:{id:"_7-pwa离线功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_7-pwa离线功能"}},[s._v("#")]),s._v(" 7 PWA离线功能")]),s._v(" "),a("p",[s._v("vuepress指南→插件→"),a("a",{attrs:{href:"https://www.vuepress.cn/plugin/official/plugin-pwa.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("pws"),a("OutboundLink")],1),s._v(" "),a("code",[s._v("npm install -D @vuepress/plugin-pwa")])]),s._v(" "),a("p",[s._v("config.js的分配置pluginConf.js")]),s._v(" "),a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'@vuepress/pwa'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n      serviceWorker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n      updatePopup"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          message"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"New content is available."')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          buttonText"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Refresh"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/zh/'")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n          message"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"发现新内容可用"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n          buttonText"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"刷新"')]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("为了让你的网站完全地兼容 PWA，你需要:\n在 .vuepress/public 提供 Manifest 和 icons\n在 .vuepress/config.js 添加正確的 head links(参见下面例子).\n更多细节，请参见 "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/Manifest",target:"_blank",rel:"noopener noreferrer"}},[s._v("MDN docs about the Web App Manifest"),a("OutboundLink")],1),s._v(".")]),s._v(" "),a("p",[a("img",{attrs:{src:"/docs/images/2020-07-23-08-03-55.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"从vuepress包里拿manifest-json放到pulic下过来改改。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从vuepress包里拿manifest-json放到pulic下过来改改。"}},[s._v("#")]),s._v(" 从vuepress包里拿manifest.json放到pulic下过来改改。")]),s._v(" "),a("ul",[a("li",[s._v("改改name，shortname")]),s._v(" "),a("li",[s._v("改改图片的位置增加"),a("code",[s._v("/vuepress/")]),s._v("(config.js里的base=vuepress对manifest不起作用，必须的自己改。)\n否则，浏览器有错误。\n如果是docs库，那么就需要改成"),a("code",[s._v("/docs/icons/xxx")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('{\n  "name": "cjb的资料库",\n  "short_name": "cjb",\n  "icons": [\n    {\n      "src": "/vuepress/icons/android-chrome-192x192.png",\n      "sizes": "192x192",\n      "type": "image/png"\n    },\n    {\n      "src": "/vuepress/icons/android-chrome-512x512.png",\n      "sizes": "512x512",\n      "type": "image/png"\n    }\n  ],\n  "start_url": "/vuepress/index.html",\n  "display": "standalone",\n  "background_color": "#fff",\n  "theme_color": "#3eaf7c"\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h3",{attrs:{id:"从vuepress包里拿icons整个目录放到public下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#从vuepress包里拿icons整个目录放到public下"}},[s._v("#")]),s._v(" 从vuepress包里拿icons整个目录放到public下")]),s._v(" "),a("p",[a("img",{attrs:{src:"/docs/images/2020-07-23-08-16-57.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"headconf-js例子里拷贝过来就行。和上面的icons是能对应上"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#headconf-js例子里拷贝过来就行。和上面的icons是能对应上"}},[s._v("#")]),s._v(" headConf.js例子里拷贝过来就行。和上面的icons是能对应上")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("head: [\n    ['link', { rel: 'icon', href: '/logo.png' }],\n    ['link', { rel: 'manifest', href: '/manifest.json' }],\n    ['meta', { name: 'theme-color', content: '#3eaf7c' }],\n    ['meta', { name: 'apple-mobile-web-app-capable', content: 'yes' }],\n    ['meta', { name: 'apple-mobile-web-app-status-bar-style', content: 'black' }],\n    ['link', { rel: 'apple-touch-icon', href: '/icons/apple-touch-icon-152x152.png' }],\n    ['link', { rel: 'mask-icon', href: '/icons/safari-pinned-tab.svg', color: '#3eaf7c' }],\n    ['meta', { name: 'msapplication-TileImage', content: '/icons/msapplication-icon-144x144.png' }],\n    ['meta', { name: 'msapplication-TileColor', content: '#000000' }]\n  ],\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("后话：\n在所有章节都设置完了之后发现加上PWA\n这个之后有时候比更新，更新比较慢，甚至有的md文件就不显示。\n为了调试方便，暂时把headerConf.js中PWA相关的注释掉，push之后马上能看到结果。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    // SEO\n    ['meta', { name: 'name', content: 'cjb的资料库' }],\n    ['meta', { name: 'keywords', content: 'java,cobol,分布式存储' }], // 增加一个自定义的 favicon(网页标签的图标)\n    ['link', { rel: 'icon', href: '/logo.png' }],\n    // PWA\n    // ['link', { rel: 'icon', href: '/logo.png' }],\n    // ['link', { rel: 'manifest', href: '/manifest.json' }],\n    // ['meta', { name: 'theme-color', content: '#3eaf7c' }],\n    // ['meta', { name: 'apple-mobile-web-app-capable', content: 'yes' }],\n    // ['meta', { name: 'apple-mobile-web-app-status-bar-style', content: 'black' }],\n    // ['link', { rel: 'apple-touch-icon', href: '/icons/apple-touch-icon-152x152.png' }],\n    // ['link', { rel: 'mask-icon', href: '/icons/safari-pinned-tab.svg', color: '#3eaf7c' }],\n    // ['meta', { name: 'msapplication-TileImage', content: '/icons/msapplication-icon-144x144.png' }],\n    // ['meta', { name: 'msapplication-TileColor', content: '#000000' }]\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("pluginConf.js")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('  //为了测试方便，暂时把PWA功能注释了。\n  // \'@vuepress/pwa\': {\n  //   serviceWorker: true,\n  //   updatePopup: {\n  //     \'/\': {\n  //       message: "New content is available.",\n  //       buttonText: "Refresh"\n  //     },\n  //     \'/zh/\': {\n  //       message: "发现新内容可用",  \n  //       buttonText: "刷新"\n  //     }\n  //   }\n  // },\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v("想启动PWA的话，删除这两个文件的注释。重新编译。"),a("code",[s._v("npm run build")])]),s._v(" "),a("h2",{attrs:{id:"编译"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译"}},[s._v("#")]),s._v(" 编译")]),s._v(" "),a("p",[a("code",[s._v("npm run build")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('tip Apply plugin @vuepress/pwa (i.e. "@vuepress/plugin-pwa") ...\n\n√ Client\n  Compiled successfully in 9.57s\n\n√ Server\n  Compiled successfully in 7.88s\n\nwait Rendering static HTML...\nwait Generating service worker...\nsuccess Generated static files in docs\\.vuepress\\dist.\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"编译将会生成dist-service-worker-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译将会生成dist-service-worker-js"}},[s._v("#")]),s._v(" 编译将会生成dist/service-worker.js")]),s._v(" "),a("p",[a("img",{attrs:{src:"/docs/images/2020-07-23-08-28-13.png",alt:""}})]),s._v(" "),a("p",[a("code",[s._v("npm run deploy")])]),s._v(" "),a("h2",{attrs:{id:"都配置完成之后怎么测试呢"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#都配置完成之后怎么测试呢"}},[s._v("#")]),s._v(" 都配置完成之后怎么测试呢？")]),s._v(" "),a("p",[s._v("必须在本地安装vuepress，否则无法生成servic-worker.js\n"),a("img",{attrs:{src:"/docs/images/2020-07-23-08-47-35.png",alt:""}}),s._v("\n在浏览器F11，看到Cache里存储了这些。就OK了。说明断网也可以浏览这些存储过的东西了。")]),s._v(" "),a("h3",{attrs:{id:"浏览器没error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#浏览器没error"}},[s._v("#")]),s._v(" 浏览器没error")]),s._v(" "),a("p",[s._v("之前浏览过的网页断网也能看")]),s._v(" "),a("h3",{attrs:{id:"手机端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#手机端"}},[s._v("#")]),s._v(" 手机端")]),s._v(" "),a("p",[s._v("打开网页，提示你添加到主屏。然后浏览一通。断网。再浏览，发现都缓存下来了。不怕断网。仍旧能看一段时间！！")])])}),[],!1,null,null,null);n.default=t.exports}}]);