(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{533:function(t,l,e){"use strict";e.r(l);var r=e(59),i=Object(r.a)({},(function(){var t=this,l=t.$createElement,e=t._self._c||l;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"_1-使用gitlabrunner充当发布用的服务器。比较容易，但是丑陋。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用gitlabrunner充当发布用的服务器。比较容易，但是丑陋。"}},[t._v("#")]),t._v(" 1 使用GitlabRunner充当发布用的服务器。比较容易，但是丑陋。")]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Runner和部署服务器是一台。整体思路就不推荐这么做。")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("https://blog.csdn.net/qq_27520051/article/details/80552220")]),t._v(" "),e("ul",[e("li",[t._v("代码从gitlab pull下来就完成了发布。")])])]),t._v(" "),e("li",[e("p",[t._v("https://www.jianshu.com/p/b1e098cdb46b")]),t._v(" "),e("ul",[e("li",[t._v("在gitlab-runner上git pull代码，并编译。")])])]),t._v(" "),e("li",[e("p",[t._v("https://blog.csdn.net/junmoxi/article/details/82762413")]),t._v(" "),e("ul",[e("li",[t._v("gitlab-ci.yml全是echo，没有一句真的。但是告诉你思路应该是Runner上执行shell。")]),t._v(" "),e("li",[t._v("就这还需要把Runner服务器上生成公钥，放到gitlab上。就是为了git pull到runner上。")])])]),t._v(" "),e("li",[e("p",[t._v("https://www.cnblogs.com/hongsusu/p/10142428.html")]),t._v(" "),e("ul",[e("li",[t._v("gitlabrunner上git pull代码（为了能pull还得把gitlabrunner的key放到gitlab的某个用户的SSH key里。）")]),t._v(" "),e("li",[t._v("【疑问】git pull了代码就完成部署了吗？")])])]),t._v(" "),e("li",[e("p",[t._v("https://segmentfault.com/a/1190000015692830")]),t._v(" "),e("ul",[e("li",[t._v("就是npm publish然后把用户名，密码都写道脚本里，发布到npm仓库（私有或公有），就发布完了。")]),t._v(" "),e("li",[t._v("这明显只适合npm包的开发工作。")])])])]),t._v(" "),e("h3",{attrs:{id:"_1-2-gitlab-ci-docker化部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-gitlab-ci-docker化部署"}},[t._v("#")]),t._v(" 1.2 gitlab-ci Docker化部署")]),t._v(" "),e("h4",{attrs:{id:"_1-2-1-使用docker镜像库。build就是上传镜像，deploy就是拉取镜像并生成容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-1-使用docker镜像库。build就是上传镜像，deploy就是拉取镜像并生成容器"}},[t._v("#")]),t._v(" 1.2.1  使用docker镜像库。build就是上传镜像，deploy就是拉取镜像并生成容器")]),t._v(" "),e("ul",[e("li",[t._v("https://www.jianshu.com/p/dc603463ef55\n"),e("ul",[e("li",[t._v("build就是在RUnner上编译，并上传docker镜像库")]),t._v(" "),e("li",[t._v("deploy就是在Runner上拉取镜像并生成了容器，使用docker-compose或不使用（直接docker run）")])])])]),t._v(" "),e("h4",{attrs:{id:"_1-2-2-没使用docker镜像仓库。build就是打包成镜像。deploy就是在runner上生成镜像。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-2-没使用docker镜像仓库。build就是打包成镜像。deploy就是在runner上生成镜像。"}},[t._v("#")]),t._v(" 1.2.2 没使用docker镜像仓库。build就是打包成镜像。deploy就是在runner上生成镜像。")]),t._v(" "),e("ul",[e("li",[t._v("https://www.jianshu.com/p/c398509f8861\n"),e("ul",[e("li",[t._v("根本不用docker镜像仓库。就是在runner上直接打包成镜像。然后删除正在运行的容器。docker run生成容器。")])])]),t._v(" "),e("li",[t._v("https://www.cnblogs.com/luffyxin/p/12800889.html\n"),e("ul",[e("li",[t._v("同上。Runner上build阶段build镜像，deploy生成容器。")]),t._v(" "),e("li",[t._v("不是很好的方案")])])])]),t._v(" "),e("div",{staticClass:"custom-block warning"},[e("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),e("p",[t._v("Runner和部署服务器是一台。整体思路就不推荐这么做。")])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"_2-部署服务器和runner是不同的机器。这是比较正常"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-部署服务器和runner是不同的机器。这是比较正常"}},[t._v("#")]),t._v(" 2 部署服务器和Runner是不同的机器。这是比较正常")]),t._v(" "),e("h3",{attrs:{id:"_2-1-非docker化部署"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-非docker化部署"}},[t._v("#")]),t._v(" 2.1 非docker化部署")]),t._v(" "),e("ul",[e("li",[t._v("https://segmentfault.com/a/1190000020622168\n"),e("ul",[e("li",[t._v("这是一篇比较完整的gitlab-ci发布到服务器的配置。runner上编译。编译后的东西拷贝到服务器。服务器不是Runner")]),t._v(" "),e("li",[t._v("把Runner上生成的公钥拷贝到另一台服务器的~/.ssh/authorized_keys文件中。")]),t._v(" "),e("li",[t._v("【常识】gitlab-ci的头部，可以写一些设置npm代理仓库。不知道能不能登陆仓库。")]),t._v(" "),e("li",[t._v("ssh到另一台服务器，采用了不验证服务器公钥的方式。见下面链接。")]),t._v(" "),e("li",[t._v("https://blog.csdn.net/aabbcc456aa/article/details/18981279\n"),e("ul",[e("li",[t._v("【不用公钥验证的自动】不检查远端主机的公钥。")])])])])])]),t._v(" "),e("h3",{attrs:{id:"_2-2-docker化部署，三个分支分别部署到三个不同的服务器。相当靠谱。"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-docker化部署，三个分支分别部署到三个不同的服务器。相当靠谱。"}},[t._v("#")]),t._v(" 2.2 docker化部署，三个分支分别部署到三个不同的服务器。相当靠谱。")]),t._v(" "),e("ul",[e("li",[t._v("https://blog.csdn.net/fly910905/article/details/106425489/\n"),e("ul",[e("li",[t._v("这里面的maven:3.6.3-jdk-11-slim既有maven又有java。")]),t._v(" "),e("li",[t._v("这篇文章值得参考。")])])]),t._v(" "),e("li",[t._v("https://www.kubernetes.org.cn/7522.html（和上面是一篇文章。）\n"),e("ul",[e("li",[t._v("相当成熟的方案。runner和部署服务器分开。并且三个分支部署到三个不同的服务器。相当靠谱。")]),t._v(" "),e("li",[t._v("同样。build就是编译工程。")]),t._v(" "),e("li",[t._v("build imag就是制作镜像并上传docker私有仓库。")]),t._v(" "),e("li",[t._v("deploy就是到对应的服务器上下载镜像。并停止掉旧的容器，生成新的容器。")])]),t._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),e("p",[t._v("这是相当靠谱的方案！思路就应该是这个思路。")])])])]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"_3-服务器与runner是否是一台。不明！！"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-服务器与runner是否是一台。不明！！"}},[t._v("#")]),t._v(" 3. 服务器与RUnner是否是一台。不明！！")]),t._v(" "),e("ul",[e("li",[t._v("https://segmentfault.com/a/1190000021092024?utm_source=tag-newest\n"),e("ul",[e("li",[t._v("就是npm run deploy , 这就算发布了？疑问！")])])])]),t._v(" "),e("h2",{attrs:{id:"webhook-是啥？"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#webhook-是啥？"}},[t._v("#")]),t._v(" webhook 是啥？")]),t._v(" "),e("p",[t._v("https://www.cnblogs.com/zhihuifan10/p/11114816.html")])])}),[],!1,null,null,null);l.default=i.exports}}]);