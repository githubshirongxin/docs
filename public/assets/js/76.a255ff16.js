(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{559:function(e,t,s){"use strict";s.r(t);var r=s(59),_=Object(r.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h2",{attrs:{id:"在团队中使用gitlab中的merge-request工作模式-转"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在团队中使用gitlab中的merge-request工作模式-转"}},[e._v("#")]),e._v(" 在团队中使用GitLab中的Merge Request工作模式 转")]),e._v(" "),s("p",[e._v("转载：https://my.oschina.net/u/4000302/blog/3032762?tdsourcetag=s_pctim_aiomsg")]),e._v(" "),s("p",[e._v("一直以来都是采用的分支管理模式，我把项目的开发分为三个阶段：开发、测试和上线。")]),e._v(" "),s("h2",{attrs:{id:"一、分支管理模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、分支管理模式"}},[e._v("#")]),e._v(" 一、分支管理模式")]),e._v(" "),s("h3",{attrs:{id:"_1、开发阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、开发阶段"}},[e._v("#")]),e._v(" 1、开发阶段")]),e._v(" "),s("ol",[s("li",[s("p",[e._v("除了")]),e._v(" "),s("p",[e._v("master")]),e._v(" "),s("p",[e._v("分支创建一个供所有开发人员开发的dev分支；")])]),e._v(" "),s("li",[s("p",[e._v("开发人员在dev分支上进行工作，随时随地"),s("a",{attrs:{href:"https://www.centos.bz/tag/commit/",target:"_blank",rel:"noopener noreferrer"}},[e._v("commit"),s("OutboundLink")],1),e._v("，每天push一次到服务器；")])]),e._v(" "),s("li",[s("p",[e._v("push代码前需要进行pull操作，因为有可能在之前有别的成员先进行了push操作，如果有冲突还需要进行冲突解决；")])]),e._v(" "),s("li",[s("p",[e._v("每天上班后所有成员对dev进行pull操作，获取所有成员push的代码，有冲突需要解决；")])]),e._v(" "),s("li",[s("p",[e._v("团队Leader每天将dev合并一次到master。")])])]),e._v(" "),s("h3",{attrs:{id:"_2、测试阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、测试阶段"}},[e._v("#")]),e._v(" 2、测试阶段")]),e._v(" "),s("ol",[s("li",[e._v("测试进入后就需要添加test分支；")]),e._v(" "),s("li",[e._v("在开发人员将代码push到dev分支后，可以在dev基础上创建test分支，测试人员以test分支搭建测试环境，开始测试；")]),e._v(" "),s("li",[e._v("开发人员在接受到bug后，直接在测试分支上修改，然后让测试人员进行验证；")]),e._v(" "),s("li",[e._v("每天团队Leader将测试分支上修改的bug合并到dev分支上，这样所有团队成员当天修复的bug都会在第二天被团队其他人pull下来；")]),e._v(" "),s("li",[e._v("团队Leader每天将dev合并一次到master。")])]),e._v(" "),s("h3",{attrs:{id:"_3、上线阶段"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、上线阶段"}},[e._v("#")]),e._v(" 3、上线阶段")]),e._v(" "),s("ol",[s("li",[e._v("系统上线后试运行阶段会存在两种改动：bug和优化需求，bug通常当天解决晚上部署，优化需求通常周末部署；")]),e._v(" "),s("li",[e._v("bug当天能修复的就直接在test分支上修复，然后进行测试，验证通过后合并到master；")]),e._v(" "),s("li",[e._v("bug当天不能修复的就针对该bug创建一个分支，修复完后合并到test分支进行测试，验证通过后合并到master；")]),e._v(" "),s("li",[e._v("每个优化需求都以master分支为基础创建一个feature分支，完成后合并到dev分支，开发人员可以先交叉测试，然后将dev合并到test进行测试，验证通过后合并到master；")]),e._v(" "),s("li",[e._v("master始终是一个干净的，可发布的分支")])]),e._v(" "),s("h2",{attrs:{id:"二、merge-request模式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、merge-request模式"}},[e._v("#")]),e._v(" 二、Merge Request模式")]),e._v(" "),s("p",[e._v("一直以来，都觉得"),s("a",{attrs:{href:"https://www.centos.bz/tag/merge/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Merge"),s("OutboundLink")],1),e._v(" Request模式遥不可及，只有做开源软件才会采用这种模式，没想到这么快就已经在团队中开始推行使用了，先看一张图来了解下Merge Request的开发流程：")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.centos.bz/wp-content/uploads/2018/08/1-1-3.jpg",alt:"img"}})]),e._v(" "),s("ol",[s("li",[s("p",[e._v("需求或是Bug都是用")]),e._v(" "),s("p",[e._v("Issue")]),e._v(" "),s("p",[e._v("来表示；")])]),e._v(" "),s("li",[s("p",[e._v("虽然Issue不支持多层级，但结合里程碑、标签等还是可以很好的对任务和Bug进行管理；")])]),e._v(" "),s("li",[s("p",[e._v("管理员和团队成员都可以进行Issue的创建；")])]),e._v(" "),s("li",[s("p",[e._v("任务的接收者对Issue创建Merge Request；")])]),e._v(" "),s("li",[s("p",[e._v("完成任务后推送代码到Merge Request对应的分支；")])]),e._v(" "),s("li",[s("p",[e._v("管理员对代码进行Merge。")])])]),e._v(" "),s("p",[s("strong",[e._v("相比较传统的分支管理模式，Merge Request可以给我们带来下面几个好处：")])]),e._v(" "),s("ol",[s("li",[s("p",[e._v("重要分支设置为受保护，杜绝了有些问题代码被提交了，但项目经理不知道的情况；")])]),e._v(" "),s("li",[s("p",[e._v("每个任务都有一个对应的分支，互相隔离，所有的代码改动有据可查；")])]),e._v(" "),s("li",[s("p",[e._v("开发人员不用在分支间切换和合并，更专注于开发。")])])]),e._v(" "),s("p",[s("strong",[e._v("下面以一个示例来介绍Merge Request的工作流程")])]),e._v(" "),s("p",[e._v("1、设置重要分支受保护")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.centos.bz/wp-content/uploads/2018/08/1-2-2.jpg",alt:"img"}})]),e._v(" "),s("p",[e._v("在上图中的位置可以将所有的重要分支设置为受保护，重要的分支通常是master、release、test等。")]),e._v(" "),s("p",[e._v("2、创建Issue")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.centos.bz/wp-content/uploads/2018/08/1-3-2.jpg",alt:"img"}})]),e._v(" "),s("p",[e._v("任务创建后，开发人员就可以对该任务创建Merge Request了，如下图：")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.centos.bz/wp-content/uploads/2018/08/1-4-2.jpg",alt:"img"}})]),e._v(" "),s("ul",[s("li",[e._v("创建Merge Request时会创建针对这个任务对一个分支；")]),e._v(" "),s("li",[e._v("分支名称的格式为：任务编号-[任务标题中出现的英文和数字]，当然分支名称也可以自行修改；")]),e._v(" "),s("li",[e._v("分支的"),s("a",{attrs:{href:"https://www.centos.bz/tag/source/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Source"),s("OutboundLink")],1),e._v("为该项目设置的主分支，主分支可以在设置/General/General project settings/Default Branch进行设置。")])]),e._v(" "),s("p",[e._v("3、使用你熟悉的工具拉取Merge Request对应的分支到本地进行代码修改，修改完成后，Push代码到服务器，代码推送后，管理员在Merge Request页面可以看到Merge按钮，如下图：")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.centos.bz/wp-content/uploads/2018/08/1-5-2.jpg",alt:"img"}})]),e._v(" "),s("p",[e._v("点击右边的Resole WIP "),s("a",{attrs:{href:"https://www.centos.bz/tag/status/",target:"_blank",rel:"noopener noreferrer"}},[e._v("status"),s("OutboundLink")],1),e._v("后，Merge按钮就可以使用")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.centos.bz/wp-content/uploads/2018/08/1-6-2.jpg",alt:"img"}})]),e._v(" "),s("p",[e._v("如果勾选Remove source brance，当Merge后，服务器端会删除创建的分支。Merge完成，会关闭关联的任务，但并不是每一次推送都可以非常顺利，有时会有冲突，当本地代码和服务器代码不一致时，会出现解决冲突的按钮，解决冲突后才能进行Merge")]),e._v(" "),s("p",[s("img",{attrs:{src:"https://www.centos.bz/wp-content/uploads/2018/08/1-7-1.jpg",alt:"img"}})]),e._v(" "),s("p",[e._v("代码Merge后，开发人员就可以按照同样的流程做下一个任务了。")]),e._v(" "),s("h2",{attrs:{id:"三、思考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、思考"}},[e._v("#")]),e._v(" 三、思考")]),e._v(" "),s("ul",[s("li",[e._v("如果系统上线后有紧急Bug需要处理，这个流程应该怎样去调整？")]),e._v(" "),s("li",[e._v("每个任务都在单独分支并行开发，这是如果A和B都以来C开发的一个模块，应该怎么解决？")]),e._v(" "),s("li",[e._v("理论上Issue管理员和开发人员都可以进行创建，什么样的Issue可以有开发人员来创建？")])]),e._v(" "),s("h2",{attrs:{id:"四、总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、总结"}},[e._v("#")]),e._v(" 四、总结")]),e._v(" "),s("ul",[s("li",[e._v("任何一种模式或工作方式的改变，总会打破一些人的舒适区，我们应该学会走出舒适区，拥抱变化；")]),e._v(" "),s("li",[e._v("尝试新的东西肯定会遇到各种问题，先执行，然后再持续优化改进，逐步达到最优状态；")]),e._v(" "),s("li",[e._v("从团队试用的情况来看，暂时没有出现水土不服的情况。")])])])}),[],!1,null,null,null);t.default=_.exports}}]);