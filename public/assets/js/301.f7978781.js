(window.webpackJsonp=window.webpackJsonp||[]).push([[301],{783:function(s,t,a){"use strict";a.r(t);var n=a(59),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("gitlab.ccbjb.com.cn 使用加密来保护你的信息。这次，当 Microsoft Edge 尝试连接到 gitlab.ccbjb.com.cn 时，网站发回了不正常和不正确的凭据。如果攻击者尝试假冒 gitlab.ccbjb.com.cn，或者 WLAN 登录屏幕已中断连接，则可能会发生这种情况。你的信息仍然安全，因为在交换任何数据之前，Microsoft Edge 停止了连接。\n\n你现在无法访问 gitlab.ccbjb.com.cn，因为网站使用的是 HSTS。网络错误和攻击通常是暂时的，因此该页面以后可能会恢复正常。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"/docs/images/2020-12-31-09-06-39.png",alt:""}})]),s._v(" "),a("p",[s._v("我收到的邮件\n"),a("img",{attrs:{src:"/docs/images/2020-12-31-09-08-43.png",alt:""}}),s._v(" "),a("img",{attrs:{src:"/docs/images/2020-12-31-09-13-51.png",alt:""}})]),s._v(" "),a("p",[s._v("重新申请密钥：\n"),a("img",{attrs:{src:"/docs/images/2020-12-31-09-16-10.png",alt:""}}),s._v(" "),a("img",{attrs:{src:"/docs/images/2020-12-31-09-16-30.png",alt:""}})]),s._v(" "),a("p",[s._v("我需要刘帅的阿里云替我添加一条txt认证\n然后选择浏览器生成密钥。\n下载后，只有两个文件\n"),a("img",{attrs:{src:"/docs/images/2020-12-31-11-03-57.png",alt:""}})]),s._v(" "),a("p",[s._v("full_chain.pem\nprivate.key")]),s._v(" "),a("p",[s._v("但是我需要的是crt和key。")]),s._v(" "),a("div",{staticClass:"language-yml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[s._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ssl_certificate'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(' = "/etc/gitlab/ssl/gitlab.ccbjb.com.cn_chain.crt"\n        nginx'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ssl_certificate_key'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(' = "/etc/gitlab/ssl/gitlab.ccbjb.com.cn_key.key"\n'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("...")]),s._v("\n\n "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[s._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("-")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/srv/gitlab/config:/etc/gitlab'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("pem包含了crt信息和key信息，所以crt可以直接从full_chain.pem改个名字就可以用。\n然后放到服务器:")]),s._v(" "),a("ul",[a("li",[s._v("/srv/gitlab/config/ssl/\n"),a("ul",[a("li",[s._v("gitlab.ccbjb.com.cn_chain.crt")]),s._v(" "),a("li",[s._v("gitlab.ccbjb.com.cn_key.key")])])])]),s._v(" "),a("p",[s._v("重启gitlab的docker")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("docker-compose restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);