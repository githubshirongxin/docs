(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{623:function(t,s,o){"use strict";o.r(s);var a=o(59),_=Object(a.a)({},(function(){var t=this,s=t.$createElement,o=t._self._c||s;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("p",[t._v("参考：https://blog.51cto.com/12227558/2074095")]),t._v(" "),o("p",[o("a",{attrs:{href:"null"}},[t._v("原创")])]),t._v(" "),o("h1",{attrs:{id:"linux运维高级篇-centos-7下postfix邮件服务器搭建"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#linux运维高级篇-centos-7下postfix邮件服务器搭建"}},[t._v("#")]),t._v(" Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建")]),t._v(" "),o("p",[o("a",{attrs:{href:"https://blog.51cto.com/12227558",target:"_blank",rel:"noopener noreferrer"}},[o("img",{attrs:{src:"https://s5.51cto.com//oss/201803/06/873f6728b942db37dd76cc4d20dbb1b3.jpg?x-oss-process=image/resize,m_fixed,h_120,w_120",alt:""}}),o("OutboundLink")],1)]),t._v(" "),o("p",[o("a",{attrs:{href:"https://blog.51cto.com/12227558",target:"_blank",rel:"noopener noreferrer"}},[t._v("0行云流水0"),o("OutboundLink")],1),t._v(" "),o("a",{attrs:{href:"null"}},[t._v("28人评论")]),t._v(" [189356人阅读](javascript:😉 [2018-02-28 23:23:44](javascript:😉")]),t._v(" "),o("p",[t._v("第一章 实验环境")]),t._v(" "),o("ol",[o("li",[t._v("硬件环境："),o("br"),t._v("\nLinux服务器一台，IP地址：192.168.80.10；"),o("br"),t._v("\nWIN7客户端一台，拥有OUTLOOK2013，测试用，与服务器在同一局域网内。")]),t._v(" "),o("li",[t._v("Linux系统环境，如下图："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201803/02/900da5c8cef4528dc821fb561e3188b8.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n第二章 实验内容"),o("br"),t._v("\n一：搭建DNS服务器"),o("br"),t._v("\n二：搭建postfix服务器及普通发信"),o("br"),t._v("\n三：普通收信"),o("br"),t._v("\n四：认证收信"),o("br"),t._v("\n五：squirrelmail收发邮件（搭建网页收发邮件）"),o("br"),t._v("\n六：邮件群发功能配置"),o("br"),t._v("\n七：邮件发送容量大小配置"),o("br"),t._v("\n八：通过配置用户磁盘配额实现限制用户邮箱空间")])]),t._v(" "),o("p",[t._v("第三章 实验步骤"),o("br"),t._v("\n准备工作："),o("br"),t._v("\n[root@localhost ~]# systemctl stop firewalld //关闭防火墙"),o("br"),t._v("\n[root@localhost ~]# setenforce 0 //关闭selinux"),o("br"),t._v("\n第一部分：搭建DNS服务器"),o("br"),t._v("\n[root@localhost ~]# yum install bind -y //安装DNS服务"),o("br"),t._v("\n------------以下编辑主配置文件--------------"),o("br"),t._v("\n[root@localhost ~]# vi /etc/named.conf"),o("br"),t._v("\n修改如下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/6eee1d96d8bfadfcbb46255528af2f24.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost ~]# named-checkconf //检查语法错误"),o("br"),t._v("\n注意：如有错误提示，详细解读错误提示，按提示修改配置文件；若没有任何提示，则表示没有语法错误。"),o("br"),t._v("\n------------以下编辑区域配置文件--------------------"),o("br"),t._v("\n[root@localhost ~]# vi /etc/named.rfc1912.zones"),o("br"),t._v("\n文件末尾加入以下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/a8af365bebc751d87c15f17f76697bec.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost ~]# named-checkconf //检查语法错误"),o("br"),t._v("\n---------------以下编辑区域数据配置文件-------------------"),o("br"),t._v("\n[root@localhost ~]# cd /var/named"),o("br"),t._v("\n[root@localhost named]# cp -p named.localhost aa.com.zone"),o("br"),t._v("\n//创建正向区域数据配置文件（注意，由于我是复制另一个样式文件，复制文件时必须加“-P”，表示复制过来的时候文件权限保持不变）"),o("br"),t._v("\n[root@localhost named]# vi aa.com.zone //编辑正向区域数据配置文件"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/560a15b023334f7bf4134a4c0e276e8e.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n（此处注意语法格式，不要漏掉“.”）"),o("br"),t._v("\n保存退出"),o("br"),t._v("\n//创建反向区域数据配置文件"),o("br"),t._v("\n[root@localhost named]# cp -p named.localhost aa.com.local"),o("br"),t._v("\n[root@localhost named]# vi aa.com.local //编辑反向区域数据配置文件"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/f7e7328116d4d6b408b8fe7f5244fc1e.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost named]# named-checkconf //检查语法错误"),o("br"),t._v("\n-------------启动服务，验证--------------"),o("br"),t._v("\n[root@localhost named]# systemctl start named //启动DNS服务"),o("br"),t._v("\n[root@localhost named]# systemctl enable named //设置开机启动"),o("br"),t._v("\n[root@localhost named]# vi /etc/resolv.conf //设置服务器域名"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/5fccb95a90546496b65cedadd10dac6b.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost named]# nslookup mail.aa.com //解析验证"),o("br"),t._v("\n成功如下图："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/d6b312b9df75d41e6f0b71c9a6dedcd7.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("p",[t._v("第二部分：搭建postfix并配置基本发信功能"),o("br"),t._v("\n[root@localhost ~]# postconf –a //验证是否支持cyrus dovecot功能"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/58574e9f510b1f935efeeba1d1fb25d3.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n（若postfix已安装好，则会支持这两个功能，若不支持，表示postfix未安装好；CentOS 7开始默认系统自带postfix。）"),o("br"),t._v("\n[root@localhost ~]# systemctl start postfix 启动服务"),o("br"),t._v("\n------------编辑主配置文件--------------"),o("br"),t._v("\n[root@localhost ~]# vi /etc/postfix/main.cf"),o("br"),t._v("\n编辑以下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/0ae7845a561eb742630b5061864516c9.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),t._v(" //邮件服务器的主机名"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/baa8406f021e0f60a40f97e4695f4d03.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),t._v(" //邮件域"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/0d0eaa3406bedf471dd45040e9209818.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),t._v(" //往外发邮件的邮件域"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/7dc6c93e222f7f23313e8fce5a585699.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//监听的网卡 （注意，两个地址之间有空格）"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/fcbd2de118c4299ec6a1c2d19b5d5a56.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//服务的对象"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/198669a83999f06bfe7498564a5f6b5c.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),t._v(" //邮件存放的目录"),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost ~]# postfix check //检查语法错误（与named-check用法一样）"),o("br"),t._v("\n[root@localhost ~]# systemctl restart postfix //重启服务"),o("br"),t._v("\n[root@localhost ~]# postconf –n //查看postfix的非默认并已生效配置"),o("br"),t._v("\n-------------增加邮件测试帐号--------------"),o("br"),t._v("\n[root@localhost ~]# groupadd mailusers //创建组给测试帐号"),o("br"),t._v("\n[root@localhost ~]# useradd -g mailusers -s /sbin/nologin jack"),o("br"),t._v("\n//创建jack帐户只属于mailusers组并不能登录系统，用于测试邮件"),o("br"),t._v("\n[root@localhost ~]# passwd jack //创建jack密码"),o("br"),t._v("\n[root@localhost ~]# useradd -g mailusers -s /sbin/nologin tom"),o("br"),t._v("\n[root@localhost ~]# passwd tom"),o("br"),t._v("\n--------------连接服务器的25端口进行简单发信测试-----------"),o("br"),t._v("\n[root@localhost ~]# telnet mail.aa.com 25"),o("br"),t._v("\n//连接成功，开始写信"),o("br"),t._v("\nhelo mail.aa.com //声明本机的主机"),o("br"),t._v("\nmail from:jack@aa.com //声明发件人地址"),o("br"),t._v("\nrcpt to:tom@aa.com //声明收件人地址"),o("br"),t._v("\ndata //写正文"),o("br"),t._v("\ni am jack!!"),o("br"),t._v("\n. //正文结束标记"),o("br"),t._v("\nquit // 退出"),o("br"),t._v("\n如图所示："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/299cefba0fd653a15a67b6d4ff030145.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n第三部分：收信验证"),o("br"),t._v("\n方法一：使用root查看tom用户是否收到测试邮件"),o("br"),t._v("\n[root@localhost ~]# cat /home/tom/Maildir/new/1515968168.Vfd00I306d0f0M475089.localhost.localdomain"),o("br"),t._v("\n成功显示："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/be6fde936b41cfacc612c97bc6e6b618.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("p",[t._v("方法二：搭建dovecot提供收信服务"),o("br"),t._v("\n--------------安装dovecot软件----------------"),o("br"),t._v("\n[root@localhost ~]# yum install -y dovecot"),o("br"),t._v("\n---------------编辑配置文件--------------"),o("br"),t._v("\n[root@localhost ~]# vi /etc/dovecot/dovecot.conf"),o("br"),t._v("\n修改以下三行："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/0f4f5e64dfcc5ca0a250f4f5ee032d74.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/9e3dd2f40e957f045d56a42456c34207.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/ac4dd6ba09f5e6bcc118bb31de2ac619.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n添加以下三行："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/04b36d67d99057064aa4c38550abc314.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/c7af7ea3b2149def22d5ad4d67c82994.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/5c9885823c8a51059fec1b7fbe93bf91.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n----------------启动服务--------------"),o("br"),t._v("\n[root@localhost ~]# systemctl start dovecot"),o("br"),t._v("\n[root@localhost ~]# netstat -anpt | grep dovecot"),o("br"),t._v("\n//110，143端口需要监听"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/adb15258e86dd85a1684da9a9e48eb23.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n---------------收信验证---------------"),o("br"),t._v("\n[root@localhost ~]# telnet mail.aa.com 110"),o("br"),t._v("\nuser tom //收件人登录"),o("br"),t._v("\npass 123 //邮箱密码"),o("br"),t._v("\nlist //列表查看邮件"),o("br"),t._v("\nretr 1 //读取编号为1的邮件"),o("br"),t._v("\nquit //退出邮箱"),o("br"),t._v("\n如图所示："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/fe4ac84c5faaae8196c782cae62da8fe.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/057e5d8921718c7b215741d1e3b69a2e.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//验证成功"),o("br"),t._v("\n方法三：用win7客户端outlook2013收信验证"),o("br"),t._v("\n打开"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/1e0e696632cf57cbc2c9d6d6df2a2f34.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n打开左上角，“文件”"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/0a4c22f4aee8f2a57e79eb67c85d7715.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n点开账户设置"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/5d9fc272eabe51f8cfe1c3a5940cc075.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n打开“新建”，"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/8c800afc2006dc24711f780de71a6a21.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n手动设置，下一步"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/1e8334548a8c9b5f0687ec771747beb2.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n选择POP或IMAP，下一步"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/166eac4dae217ce5a7b252627cba773f.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n配置tom信息，下一步"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/ae2e0ead42fa51f47c6f5a2053fd9562.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n连接服务器成功"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/ab665d4edb4f15739dee423be7cbc787.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n完成"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/7b2a32ee283ee677f1f458ae0abefa63.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("p",[t._v("点开左侧“所有文件夹”，tom帐户已登录"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/4d4b0af8c0b50830e7958f6381374260.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n点开“收件箱”，tom已成功接收到邮件"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/4430b4f3f678bacb7fba9d90e3bc9879.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//验证成功"),o("br"),t._v("\n注意：如果收信慢，可点击右上角接收"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/e4a07547cf0412e6a44cc44af6533560.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("p",[t._v("第四部分：发信认证配置")]),t._v(" "),o("ol",[o("li",[t._v("编辑认证配置文件"),o("br"),t._v("\n---------安装cyrus-sasl软件-------------"),o("br"),t._v("\n[root@localhost ~]# yum install -y cyrus-sasl "),o("em",[t._v("//注意，此处加上“")]),t._v("”，包含安装该软件所包含插件"),o("br"),t._v("\n----------编辑配置文件---------------"),o("br"),t._v("\n[root@localhost ~]# vi /etc/sasl2/smtpd.conf"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/38080520721fe723dcc00e1295e0ca72.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),t._v(" //配置认证方式"),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost ~]# vi /etc/sysconfig/saslauthd"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/0a1c0f11237b063090122fa65d5ab097.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),t._v(" //本地用户认证"),o("br"),t._v("\n保存退出"),o("br"),t._v("\n-------------启动服务--------------"),o("br"),t._v("\n[root@localhost ~]# systemctl start saslauthd"),o("br"),t._v("\n[root@localhost ~]# systemctl enable saslauthd")]),t._v(" "),o("li",[t._v("编辑postfix主配置文件"),o("br"),t._v("\n[root@localhost ~]# vi /etc/postfix/main.cf"),o("br"),t._v("\n添加以下内容："),o("br"),t._v("\nsmtpd_sasl_auth_enable = yes //开启认证"),o("br"),t._v("\nsmtpd_sasl_security_options = noanonymous //不允许匿名发信"),o("br"),t._v("\nmynetworks = 127.0.0.0/8 //允许的网段，如果增加本机所在网段就会出现允许不验证也能向外域发信"),o("br"),t._v("\nsmtpd_recipient_restrictions = permit_mynetworks,permit_sasl_authenticated,reject_unauth_destination //允许本地域以及认证成功的发信，拒绝认证失败的发信"),o("br"),t._v("\n如图："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/65e318a64b9bd5e2d0e220d8c45e219e.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n[root@localhost ~]# postfix check //检查语法错误"),o("br"),t._v("\n[root@localhost ~]# systemctl restart postfix //重启postfix服务")]),t._v(" "),o("li",[t._v("测试普通发信验证"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/9b37be1a9554d092b3b81822f37baa81.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//注意：由于abc@163.com未认证，所以拒绝访问，发送失败")]),t._v(" "),o("li",[t._v("将邮件用户名和密码生成密文"),o("br"),t._v('\n[root@localhost ~]# printf "jack" | openssl base64 //帐户加密'),o("br"),t._v('\n[root@localhost ~]# printf "123" | openssl base64 //密码加密'),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/4b8a2ac3bae3f1d489b368d16ded63a5.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("li",[t._v("字符终端测试认证发信"),o("br"),t._v("\n[root@localhost ~]# telnet mail.aa.com 25"),o("br"),t._v("\nehlo mail.aa.com //注意是ehlo不是helo"),o("br"),t._v("\nauth login //认证登录"),o("br"),t._v("\namFjaw== //密文用户名"),o("br"),t._v("\nMTIz //密文密码"),o("br"),t._v("\nmail from:jack@aa.com"),o("br"),t._v("\nrcpt to:aa@163.com"),o("br"),t._v("\ndata"),o("br"),t._v("\nthis is test"),o("br"),t._v("\n."),o("br"),t._v("\nquit"),o("br"),t._v("\n//发送成功")]),t._v(" "),o("li",[t._v("win7客户端用outlook2013测试认证发信"),o("br"),t._v("\n更改帐户配置"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/ae4d148e5487e5001eedad78ddf93476.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n点开“其它设置”"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/1cc87650559f379f943289be9feb4f2c.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n发送服务器，打√，使用与接收邮件服务器相同的设置"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/f98da6a9eff4a15d4e66e40ef6bf1405.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n下一步，成功"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/70cd76e519c03dc3af5d786d11f48adb.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n新建电子邮件"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/60443a70d6900b2bf18d12e765c9b801.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n写信"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/4cd8b3ce7e533f95eaa06d62e765b52f.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//查看jack是否接收到邮件"),o("br"),t._v("\nOutlook添加jack帐户，与添加tom方法一样，其它设置中记得打√"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/4901a6050479cad8b100d6ced8d20fec.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//验证成功")])]),t._v(" "),o("p",[t._v("第五部分：配置squirrelmail收发邮件（小松鼠网页浏览邮箱）"),o("br"),t._v("\n---------------搭建LAMP环境-------------")]),t._v(" "),o("ol",[o("li",[t._v("安装httpd，mariadb，php服务"),o("br"),t._v("\nyum install -y \\"),o("br"),t._v("\nhttpd \\ //Apache服务"),o("br"),t._v("\nmariadb-server mariadb \\ //Mysql服务"),o("br"),t._v("\nphp \\ //PHP服务"),o("br"),t._v("\nphp-mysql \\ //PHP关联数据库"),o("br"),t._v("\nphp-gd \\"),o("br"),t._v("\nlibjpeg* \\"),o("br"),t._v("\nphp-ldap \\"),o("br"),t._v("\nphp-odbc \\"),o("br"),t._v("\nphp-pear \\"),o("br"),t._v("\nphp-xml \\"),o("br"),t._v("\nphp-xmlrpc \\"),o("br"),t._v("\nphp-mhash")]),t._v(" "),o("li",[t._v("编辑Apache主配置文件"),o("br"),t._v("\n[root@localhost ~]# vi /etc/httpd/conf/httpd.conf"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/2a5872542dfe447a67cc34682dbcf71b.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),t._v(" //域名"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/d490eedb9080266e92ad6c5d0043b068.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出")]),t._v(" "),o("li",[t._v("编辑PHP主配置文件"),o("br"),t._v("\n[root@localhost ~]# vi /etc/php.ini"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/7936fe6b5b7df47f00aac50c6cc3a330.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出")]),t._v(" "),o("li",[t._v("启动服务"),o("br"),t._v("\n[root@localhost ~]# systemctl start httpd //启动Apache服务"),o("br"),t._v("\n[root@localhost ~]# systemctl enable httpd //设置开机启动"),o("br"),t._v("\n[root@localhost ~]# systemctl start mariadb //启动mysql数据库服务"),o("br"),t._v("\n[root@localhost ~]# systemctl enable mariadb //设置开机启动"),o("br"),t._v("\n[root@localhost ~]# netstat -anpt | grep 80 //查看httpd端口状态"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/b0cb66f88a3f0f3669089c2ceea22a60.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n[root@localhost ~]# netstat -anpt | grep 3306 //查看mysql端口状态"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/7748a6705db57a8b9987795ebf71c205.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("li",[t._v("网页测试 "),o("a",{attrs:{href:"http://192.168.80.10/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://192.168.80.10/"),o("OutboundLink")],1),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/fe8fe93d2f628e666ec5c1d950d89175.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("li",[t._v("编辑mysql数据库安全配置"),o("br"),t._v("\n[root@localhost ~]# mysql_secure_installation"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/0b7544d85eee85c784f24b3d629a6ab5.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//使用本地管理员root进入"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/1b9f2fbe0f9c07376513756cb9faabf5.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//创建数据库管理员密码，回车，输入两遍密码（123）"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/d3569e9109a52a3fbab3e52d5a129844.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//移除匿名用户"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/8a57e889e9749dc9711b9e64d326efab.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//不允许管理员远程登录，选择否"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/3ea666bf26a30dc6e0cdf7db713f8925.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//删除测试数据库"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/d2e37bf1cafe44771270a2d9602e4a86.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//重新载入权限配置")]),t._v(" "),o("li",[t._v("编辑php测试文件"),o("br"),t._v("\n[root@localhost ~]# vi /var/www/html/index.php"),o("br"),t._v("\n创建php默认配置文件，并添加以下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/cb88f3af7e9d39c08509461fe1c6e0f9.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n//网页测试 "),o("a",{attrs:{href:"http://192.168.80.10/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://192.168.80.10/"),o("OutboundLink")],1),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/c428bb268f06556c4b20474c78cf806f.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//测试成功")]),t._v(" "),o("li",[t._v("编辑mysql数据库"),o("br"),t._v("\n//进入数据库，建立授权帐号"),o("br"),t._v("\n[root@localhost ~]# mysql -u root –p"),o("br"),t._v("\n输入数据库密码（123），回车进入，输入以下内容"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/2484637ad7d94f9115e5e00f9676f7d5.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//测试数据库工作是否正常"),o("br"),t._v("\n[root@localhost ~]# vi /var/www/html/index.php"),o("br"),t._v("\n将其它内容删除，并输入以下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/932c77aa938d6fd82c2f63fe2a39e8b2.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n刷新网页"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/e9e0ffa2ee8b646ac47a515eb25138bc.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//测试成功"),o("br"),t._v("\n----------------搭建小松鼠网页邮箱--------------")]),t._v(" "),o("li",[t._v("准备工作"),o("br"),t._v(" "),o("a",{attrs:{href:"http://www.squirrelmail.org/download.php",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://www.squirrelmail.org/download.php"),o("OutboundLink")],1),o("br"),t._v("\n到该网站去下载压缩包到Linux服务器"),o("br"),t._v("\n安装包："),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/1633912e1336bd693cb54181f5090203.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n汉化包："),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/0f73d8b5d9e801bc6efb5a2d7486432c.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/7208e96fb955d0fde50d3d16a93ecddd.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("li",[t._v("解压"),o("br"),t._v("\n[root@localhost ~]# tar xzvf squirrelmail-webmail-1.4.22.tar.gz"),o("br"),t._v("\n//解压安装包，生成一个安装文件"),o("br"),t._v("\n[root@localhost ~]# tar xzvf all_locales-1.4.18-20090526.tar.gz -C squirrelmail-webmail-1.4.22"),o("br"),t._v("\n//解压汉化包到安装文件里面"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/46e703e7cc7c86ecbc287dda62f144c0.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n[root@localhost ~]# cp -rv squirrelmail-webmail-1.4.22 /var/www/html/mail"),o("br"),t._v("\n//复制该文件到http默认目录下"),o("br"),t._v("\n[root@localhost ~]# cd /var/www/html/mail/"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/4ad735117113868a87e8a46442febd31.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("li",[t._v("创建小松鼠网页默认配置文件"),o("br"),t._v("\n[root@localhost mail]# mkdir attach"),o("br"),t._v("\n[root@localhost mail]# chown -R apache:apache attach/ data/"),o("br"),t._v("\n[root@localhost mail]# cd config"),o("br"),t._v("\n[root@localhost config]# cp config_default.php config.php"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/f6d0592d94da0ceb2606e180defb9390.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("li",[t._v("编辑配置文件"),o("br"),t._v("\n[root@localhost config]# vi config.php"),o("br"),t._v("\n修改以下内容："),o("br"),t._v("\n$domain = 'aa.com'; //域名"),o("br"),t._v("\n$imap_server_type = 'dovecot'; //服务类型"),o("br"),t._v("\n$data_dir = '/var/www/html/mail/data'; //数据目录"),o("br"),t._v("\n$attachment_dir = '/var/www/html/mail/attach/'; //附件目录"),o("br"),t._v("\n$squirrelmail_default_language = 'zh_CN'; //默认语言环境"),o("br"),t._v("\n$default_charset = 'zh_CN.UTF-8'; //默认字符编码"),o("br"),t._v("\n保存退出"),o("br"),t._v("\n//注意特殊字符，“$”与“;”不要漏掉")]),t._v(" "),o("li",[t._v("网页验证测试 "),o("a",{attrs:{href:"http://192.168.80.10/mail",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://192.168.80.10/mail"),o("OutboundLink")],1),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/c97d9c466b0bdd287802ae26f7314abd.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n输入jack或者tom帐户密码登录"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/6eef08134e8e80fa6ee58010b768ab26.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//验证成功")])]),t._v(" "),o("p",[t._v("第六部分：邮件群发配置")]),t._v(" "),o("ol",[o("li",[t._v("设置邮件组"),o("br"),t._v("\n[root@localhost ~]# vi /etc/aliases"),o("br"),t._v("\n添加以下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/e7d9dd9c276db0647284e91bf6220329.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//将jack，tom加入到student组里面"),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost ~]# newaliases //生成新的hash数据库文件")]),t._v(" "),o("li",[t._v("重启postfix服务"),o("br"),t._v("\n[root@localhost ~]# systemctl restart postfix /重启postfix服务")]),t._v(" "),o("li",[t._v("添加lucy邮件测试用户"),o("br"),t._v("\n[root@localhost ~]# useradd -g mailusers -s /sbin/nologin lucy"),o("br"),t._v("\n[root@localhost ~]# passwd lucy")]),t._v(" "),o("li",[t._v("登录outlook2013，登录lucy帐户，给student组群发邮件"),o("br"),t._v("\n//在outlook中添加lucy帐户"),o("br"),t._v("\n//用lucy帐户发信"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/8e0c839e6e9a50d7eeaa40d4d0d171d0.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})])]),t._v(" "),o("p",[t._v("//查看tom与jack帐户收信"),o("br"),t._v("\nJack成功收信"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/1bd7a4d8348e4495af533a42101a0696.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\ntom成功收信"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/c41fefa3814d8d0075fc8df4ee56facc.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//验证成功")]),t._v(" "),o("p",[t._v("第七部分：发送邮件容量大小限制"),o("br"),t._v("\n------------编辑配置文件--------------"),o("br"),t._v("\n[root@localhost ~]# vi /etc/postfix/main.cf //编辑postfix配置文件"),o("br"),t._v("\n最后添加以下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/be7cf5a8dd3d12973923c175b1411661.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//限制发送的邮件大小最大为5MB"),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost ~]# systemctl restart postfix //重启postfix服务"),o("br"),t._v("\n--------------------用outlook验证----------------------"),o("br"),t._v("\n//发送一个超过5M的文件"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/86e17ef76a3c3280050af5a337470912.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/999740736a88c3696dc6968e844bd960.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/a93e6b7e76ff8c6129564d482d57b127.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/4c8d0026ac19884ffa3d9e562fcf0f38.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}})]),t._v(" "),o("p",[t._v("//发送失败，验证成功")]),t._v(" "),o("p",[t._v("第八部分：通过配置用户磁盘配额实现限制用户邮箱空间"),o("br"),t._v("\n-----------开启磁盘配额------------"),o("br"),t._v("\n[root@localhost ~]# df –hT //查看邮件目录挂载信息"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/c1af25052f32ca2a869ceda65b28f015.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n[root@localhost ~]# vi /etc/fstab"),o("br"),t._v("\n//修改配置文件，实现开机自动挂载"),o("br"),t._v("\n修改以下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/b5a8ea93086e91ded40dd85cf9a66bb7.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost ~]# mount //查看sda2磁盘配额开启状态"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/a71900f90035b95bade7c13d3b190c15.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n[root@localhost ~]# umount /home/ //卸载home目录"),o("br"),t._v("\n[root@localhost ~]# mount –a //重新挂载"),o("br"),t._v("\n[root@localhost ~]# mount //查看挂载状态"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/17b114ca082a2c7752370ea79eee2c05.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//挂载成功"),o("br"),t._v("\n[root@localhost ~]# quotaon -p /home/"),o("br"),t._v("\n//确认home目录磁盘配额已开启"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/0878f4b6bb51fc70b875ced0ad443745.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//由于sda2分区格式为xfs，默认自动开启磁盘配额功能"),o("br"),t._v("\n--------------为jack用户配置磁盘配额限制---------------"),o("br"),t._v("\n[root@localhost ~]# edquota -u jack"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/33539ca8b6bbb5b31c10ba18e26c50fc.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//配置jack用户邮箱大小为最大10M"),o("br"),t._v("\n-------------测试，验证--------------"),o("br"),t._v("\n//将邮件发送大小限制去掉"),o("br"),t._v("\n[root@localhost ~]# vi /etc/postfix/main.cf"),o("br"),t._v("\n删除以下内容："),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/63d3cb16abbb97d14f2b7065049ecae0.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n保存退出"),o("br"),t._v("\n[root@localhost ~]# systemctl restart postfix //重启服务"),o("br"),t._v("\n//用outlook发送邮件给jack"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/b769a87995b39a95d668d176a8ffd5ac.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/100f6bbc3d0062a9ac0be5803bbfb1e4.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//发出第三封邮件之后，邮箱提示，硬盘配额溢出"),o("br"),t._v("\n[root@localhost ~]# cd /home/jack/Maildir/cur/"),o("br"),t._v("\n//进入jack用户存放邮件的目录查看接收邮件的大小"),o("br"),t._v(" "),o("img",{attrs:{src:"https://s4.51cto.com/images/blog/201802/28/3919dd87b55c0ecd19470877e00ddcc4.png?x-oss-process=image/watermark,size_16,text_QDUxQ1RP5Y2a5a6i,color_FFFFFF,t_100,g_se,x_10,y_10,shadow_90,type_ZmFuZ3poZW5naGVpdGk=",alt:"Linux运维高级篇—CentOS 7下Postfix邮件服务器搭建"}}),o("br"),t._v("\n//系统默认接收到两封邮件后容量已达7.1M，无法再接收第三封3M的邮件，磁盘配额生效，测试成功！！")]),t._v(" "),o("p",[t._v("©著作权归作者所有：来自51CTO博客作者0行云流水0的原创作品，如需转载，请注明出处，否则将追究法律责任")]),t._v(" "),o("p",[o("a",{attrs:{href:"https://blog.51cto.com/search/result?q=linux",target:"_blank",rel:"noopener noreferrer"}},[t._v("linux"),o("OutboundLink")],1),t._v(" "),o("a",{attrs:{href:"https://blog.51cto.com/search/result?q=%E6%9E%84%E5%BB%BA",target:"_blank",rel:"noopener noreferrer"}},[t._v("构建"),o("OutboundLink")],1),t._v(" "),o("a",{attrs:{href:"https://blog.51cto.com/search/result?q=postfi+",target:"_blank",rel:"noopener noreferrer"}},[t._v("postfi"),o("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=_.exports}}]);