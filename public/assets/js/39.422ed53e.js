(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{523:function(s,e,n){"use strict";n.r(e);var a=n(59),r=Object(a.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"a机器的docker客户端，与b机器的docker守护进程交互。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#a机器的docker客户端，与b机器的docker守护进程交互。"}},[s._v("#")]),s._v(" A机器的docker客户端，与B机器的docker守护进程交互。")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("docker守护进程如何配置为远程可连接")]),s._v(" "),n("p",[s._v("https://blog.csdn.net/z435999799/article/details/79098714")])]),s._v(" "),n("p",[s._v("B机器：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/usr/lib/systemd/system/docker.service 文件。\nExecStart=/usr/bin/dockerd -H unix://home/docker/docker.sock -H tcp://0.0.0.0:2375\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("-H tcp://0.0.0.0:2375 给别的机器用(不加密的)\n-H unix://home/docker/docker.sock 留给自己用，不写则B上"),n("code",[s._v("docker info")]),s._v("用不了")]),s._v(" "),n("p",[s._v("A机器")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker -H tcp://192.168.3.109:2375 info\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("显示的是3.109机器的docker info")]),s._v(" "),n("h2",{attrs:{id:"docker守护进程加密"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#docker守护进程加密"}},[s._v("#")]),s._v(" docker守护进程加密")]),s._v(" "),n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"custom-block-title"},[s._v("TIP")]),s._v(" "),n("p",[s._v("https://blog.csdn.net/alinyua/article/details/81086124?utm_source=blogxgwz5")])]),s._v(" "),n("p",[s._v("注意")]),s._v(" "),n("ul",[n("li",[s._v("监听unix:///var/run/docker.sock是为了实现本机docker直接控制")]),s._v(" "),n("li",[s._v("监听tcp://0.0.0.0:2376表示监听2376端口所有连接,又这里开启了TLS验证,则会根据我们给定的TLS文件去做验证")])]),s._v(" "),n("h3",{attrs:{id:"b机器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#b机器"}},[s._v("#")]),s._v(" B机器")]),s._v(" "),n("ul",[n("li",[s._v("/etc/docker/daemon.json")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('[root@centos109 ~]# cat /etc/docker/daemon.json\n{\n  "tlsverify": true,\n  "tlscacert": "/opt/docker-ssl/ca.pem",\n  "tlscert": "/opt/docker-ssl/server-cert.pem",\n  "tlskey": "/opt/docker-ssl/server-key.pem",\n  "hosts": ["tcp://0.0.0.0:2376","unix:///var/run/docker.sock"],\n  "registry-mirrors": ["https://5ehijrnq.mirror.aliyuncs.com"]\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("ul",[n("li",[s._v("/usr/lib/systemd/system/docker.service")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("ExecStart=/usr/bin/dockerd\n# -H fd://  -containerd=/run/containerd/containerd.sock\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h3",{attrs:{id:"a机器-3-121"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#a机器-3-121"}},[s._v("#")]),s._v(" A机器 3.121")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("docker --tlsverify --tlscacert=ca.pem --tlscert=cert.pem --tlskey=key.pem -H=192.168.3.109:237 6 info\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("div",{staticClass:"language-bash line-numbers-mode"},[n("div",{staticClass:"highlight-lines"},[n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("div",{staticClass:"highlighted"},[s._v(" ")]),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br"),n("br")]),n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos121 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker --tlsverify --tlscacert=ca.pem --tlscert=cert.pem --tlskey=key.pem -H=192.168.3.109:2376 info")]),s._v("\nClient:\n Debug Mode: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\nServer:\n Containers: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  Running: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  Paused: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n  Stopped: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n Images: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n Server Version: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.03")]),s._v(".13\n Storage Driver: overlay2\n  Backing Filesystem: xfs\n  Supports d_type: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n  Native Overlay Diff: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("\n Logging Driver: json-file\n Cgroup Driver: cgroupfs\n Plugins:\n  Volume: "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v("\n  Network: bridge "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" ipvlan macvlan null overlay\n  Log: awslogs fluentd gcplogs gelf journald json-file "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("local")]),s._v(" logentries splunk syslog\n Swarm: inactive\n Runtimes: runc\n Default Runtime: runc\n Init Binary: docker-init\n containerd version: 8fba4e9a7d01810a393d5d25a3621dc101981175\n runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd\n init version: fec3683\n Security Options:\n  seccomp\n   Profile: default\n Kernel Version: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".0-862.el7.x86_64\n Operating System: CentOS Linux "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Core"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n OSType: linux\n Architecture: x86_64\n CPUs: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n Total Memory: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(".702GiB\n Name: centos109\n ID: 5P5P:DOKF:UFK7:VFQ6:A52N:2QAV:XZWG:ZG77:VJTX:CJJI:B4AY:K4FX\n Docker Root Dir: /var/lib/docker\n Debug Mode: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n Registry: https://index.docker.io/v1/\n Labels:\n Experimental: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n Insecure Registries:\n  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.0/8\n Registry Mirrors:\n  https://5ehijrnq.mirror.aliyuncs.com/\n Live Restore Enabled: "),n("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos121 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br")])]),n("p",[s._v("可见Name为“3.109”。3.121客户端调用的是3.109的守护进程。")])])}),[],!1,null,null,null);e.default=r.exports}}]);