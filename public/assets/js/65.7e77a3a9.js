(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{548:function(e,t,s){"use strict";s.r(t);var o=s(59),r=Object(o.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("k8s运维过程中遇到的问题会持续更新。")]),e._v(" "),s("h2",{attrs:{id:"问题一览表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题一览表"}},[e._v("#")]),e._v(" 问题一览表")]),e._v(" "),s("h3",{attrs:{id:"_1-q-kubectl-get-nodes-roles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-q-kubectl-get-nodes-roles"}},[e._v("#")]),e._v(" 1. [Q]: kubectl get nodes  ROLES "),s("none")],1),e._v(" "),s("h3",{attrs:{id:"解决-https-blog-csdn-net-textdemo123-article-details-104795784"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决-https-blog-csdn-net-textdemo123-article-details-104795784"}},[e._v("#")]),e._v(" 解决: https://blog.csdn.net/textdemo123/article/details/104795784/")]),e._v(" "),s("p",[e._v("给节点打上标签即可。"),s("code",[e._v("kubectl label node k8s-node1 node-role.kubernetes.io/worker=worker")]),e._v(" k8s-node1为node的hostname")]),e._v(" "),s("h3",{attrs:{id:"_2-q-kubectl-get-nodes-the-connection-to-the-server-192-168-170-132-8080-was-refused-did-you-specify-the-right-host-or-port"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-q-kubectl-get-nodes-the-connection-to-the-server-192-168-170-132-8080-was-refused-did-you-specify-the-right-host-or-port"}},[e._v("#")]),e._v(" 2. [Q] kubectl get nodes . The connection to the server 192.168.170.132:8080 was refused - did you specify the right host or port?")]),e._v(" "),s("h3",{attrs:{id:"解决："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决："}},[e._v("#")]),e._v(" 解决：")]),e._v(" "),s("p",[e._v("https://blog.csdn.net/qq_24046745/article/details/94405188\n出现这个问题的原因是kubectl命令需要使用kubernetes-admin来运行，\n解决方法如下：")]),e._v(" "),s("p",[e._v("将主节点中的【/etc/kubernetes/admin.conf】文件拷贝到从节点相同目录下，\n然后配置环境变量：\n"),s("strong",[e._v("centos1")]),e._v(" (master):\n"),s("code",[e._v("scp /etc/kubernetes/admin.conf root@centos2:/etc/kubernetes/admin.conf")])]),e._v(" "),s("p",[s("strong",[e._v("centos2")]),e._v(" (worker):\n"),s("code",[e._v('echo "export KUBECONFIG=/etc/kubernetes/admin.conf" >> ~/.bash_profile')]),e._v("\n立即生效\n"),s("code",[e._v("source ~/.bash_profile")]),e._v("\n在运行kubectl命令就成功了")])])}),[],!1,null,null,null);t.default=r.exports}}]);