(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{647:function(s,a,n){"use strict";n.r(a);var t=n(59),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("p",[s._v("::: warnning\n注意：使用nginx代理的方式比较好。域名比较容易记，仅此而已。\n参考“【nexus】私有仓库使用手顺（最终版）！！”\n:::")]),s._v(" "),n("h2",{attrs:{id:"非ssl方式："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#非ssl方式："}},[s._v("#")]),s._v(" 非ssl方式：")]),s._v(" "),n("p",[s._v("安装nexus的文章请看maven/【nexus】 nexus服务器搭建\n基本思路就是创建在nexus上创建repository，类型选择hosted，docker（Hosted）\n补充说明一下，我自己的nexus管理docker大概也是这么搭建的。只不过我的group端口用了8082\nhttps://segmentfault.com/a/1190000015629878")]),s._v(" "),n("p",[n("img",{attrs:{src:"/docs/images/2020-08-05-21-24-21.png",alt:""}})]),s._v(" "),n("ul",[n("li",[n("p",[s._v("docker-hub(proxy)\nremote storage: https://registry-1.docker.io\nhttp://192.168.3.124:8081/repository/docker-hub/\nhttp和https没有指定端口\nblob store= docker-hub（自己创建的blob）")])]),s._v(" "),n("li",[n("p",[s._v("docker-private（Hosted）\n指定http端口 8082\nblob store = docker-private（自己创建的blob）")])]),s._v(" "),n("li",[n("p",[s._v("docker-public（group）\n指定http端口 8083\nmembers： docker-hub和docker-private")])])]),s._v(" "),n("h2",{attrs:{id:"【push实验】push-8082-失败-显示-已经有layer了-，push-8083-成功。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#【push实验】push-8082-失败-显示-已经有layer了-，push-8083-成功。"}},[s._v("#")]),s._v(" 【push实验】push 8082 失败 显示“已经有layer了”，push 8083 成功。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /etc/docker/daemon.json")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"insecure-registries"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"harbor.ccbjb.com.cn"')]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.3.124:8082"')]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.3.124:8083"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl daemon-reload && systemctl restart docker.service")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker login 192.168.3.124:8083")]),s._v("\nUsername: admin\nPassword:\nLogin Succeeded\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker login 192.168.3.124:8082")]),s._v("\nUsername: admin\nPassword:\nLogin Succeeded\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker tag nexus.ccbjb.com.cn:8082/maven 192.168.3.124:8082/maven:latest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker push 192.168.3.124:8082/maven:latest")]),s._v("\nThe push refers to a repository "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8082/maven"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbdbf23b95f23: Layer already exists\n39f101bd8163: Layer already exists\n110d6f7f8f5a: Layer already exists\n6d68b3b2b634: Layer already exists\n10d514aca949: Layer already exists\nd7d3f0b240dc: Layer already exists\nerror parsing HTTP "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("404")]),s._v(" response body: unexpected end of JSON input: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('""')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker tag nexus.ccbjb.com.cn:8082/maven 192.168.3.124:8083/maven:latest")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker push  192.168.3.124:8083/maven:latest")]),s._v("\nThe push refers to a repository "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8083/maven"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nbdbf23b95f23: Layer already exists\n39f101bd8163: Layer already exists\n110d6f7f8f5a: Layer already exists\n6d68b3b2b634: Layer already exists\n10d514aca949: Layer already exists\nd7d3f0b240dc: Layer already exists\nlatest: digest: sha256:23801edad8cd013544bfd8c0ed698182c172b9dba66bc5a42054a65f5da9c6ca size: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1579")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker tag 192.168.3.108/edusite/node 192.168.3.124:8083/node")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker push 192.168.3.124:8083/node")]),s._v("\nThe push refers to a repository "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8083/node"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n0ddfc92678f1: Pushed\n937b32faacbc: Pushed\nf81e2504e954: Pushed\nbc17cd405095: Pushed\nee854067fbbd: Pushed\n740ffea5d5c3: Pushed\neac9ead92b24: Pushed\n23bca356262f: Pushed\n8354d5896557: Pushed\nlatest: digest: sha256:d64072a554283e64e1bfeb1bb457b7b293b6cd5bb61504afaa3bdd5da2a7bc4b size: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2215")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br")])]),n("h2",{attrs:{id:"【pull实验】pull-from-docker-private（hosted）如果私服上没有，也没有自动下载呀"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#【pull实验】pull-from-docker-private（hosted）如果私服上没有，也没有自动下载呀"}},[s._v("#")]),s._v(" 【pull实验】pull from docker-private（Hosted）如果私服上没有，也没有自动下载呀")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker login 192.168.3.124:8083")]),s._v("\nUsername: admin\nPassword:\nWARNING"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Your password will be stored unencrypted "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /root/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#credentials-store")]),s._v("\n\nLogin Succeeded\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull 192.168.3.124:8083/node")]),s._v("\nUsing default tag: latest\nError response from daemon: manifest "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8083/node:latest not found: manifest unknown: manifest unknown\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br")])]),n("h2",{attrs:{id:"【pull实验】pull-from-docker-group（group）-，没有就自动下载"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#【pull实验】pull-from-docker-group（group）-，没有就自动下载"}},[s._v("#")]),s._v(" 【pull实验】pull from docker-group（group） ，没有就自动下载")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker login 192.168.3.124:8082")]),s._v("\nUsername: admin\nPassword:\nWARNING"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" Your password will be stored unencrypted "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" /root/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#credentials-store")]),s._v("\n\nLogin Succeeded\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull 192.168.3.124:8082/node")]),s._v("\nUsing default tag: latest\nlatest: Pulling from node\n7e6d8ed60355: Pull complete\n43421f771d04: Pull complete\nc36327c39ae4: Pull complete\n22b0be3e8a61: Pull complete\n6b168feb1bb0: Pull complete\n0a127f2eabe9: Pull complete\nb8ebb87902bd: Pull complete\n74fcd4404a16: Pull complete\ne8efbeec3186: Pull complete\nDigest: sha256:8f367919218e11900dbaea0c399ed33367c43a27e05e54d6d14961aa903cabc6\nStatus: Downloaded newer image "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8082/node:latest\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8082/node:latest\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br")])]),n("p",[n("img",{attrs:{src:"/docs/images/2020-08-05-21-46-59.png",alt:""}})]),s._v(" "),n("h2",{attrs:{id:"【pull实验】私服上docker-private有镜像，从8082（group）下载，非常快地从private下来了。"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#【pull实验】私服上docker-private有镜像，从8082（group）下载，非常快地从private下来了。"}},[s._v("#")]),s._v(" 【pull实验】私服上docker-private有镜像，从8082（group）下载，非常快地从private下来了。")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY                                           TAG                 IMAGE ID            CREATED             SIZE\ndocker.io/maven                                      latest              e85864b4079a        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" days ago          "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("522")]),s._v(" MB\ndocker.io/node                                       latest              37ad18cd8bd1        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("943")]),s._v(" MB\nharbor.ccbjb.com.cn/library/node                     latest              37ad18cd8bd1        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" weeks ago         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("943")]),s._v(" MB\nregistry.aliyuncs.com/google_containers/kube-proxy   v1.15.3             232b5c793146        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v(" months ago       "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("82.4")]),s._v(" MB\nquay.io/coreos/flannel                               v0.10.0-amd64       f0fad859c909        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" years ago         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("44.6")]),s._v(" MB\nharbor.ccbjb.com.cn/library/flannel                  "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("107")]),s._v("                 f0fad859c909        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" years ago         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("44.6")]),s._v(" MB\nregistry.aliyuncs.com/google_containers/pause        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.1")]),s._v("                 da86e6ba6ca1        "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" years ago         "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("742")]),s._v(" kB\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("p",[n("img",{attrs:{src:"/docs/images/2020-08-06-10-43-41.png",alt:""}}),s._v(" "),n("img",{attrs:{src:"/docs/images/2020-08-06-10-43-53.png",alt:""}})]),s._v(" "),n("p",[s._v("docker-private库里有vuejs/ci")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull 192.168.3.124:8082/vuejs/ci")]),s._v("\nUsing default tag: latest\nTrying to pull repository "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8082/vuejs/ci "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nlatest: Pulling from "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8082/vuejs/ci\n7568c21980bd: Pull complete\n4a9f2207c812: Pull complete\n6fe350d2b140: Pull complete\nd95a2fdc8b3d: Pull complete\n760eb225f9e8: Pull complete\n5613fb83b27a: Pull complete\n53d93b41e541: Pull complete\ne56596e442fa: Pull complete\nd07b402308ba: Pull complete\na0c1c9f87b65: Pull complete\n51bff25f4ef8: Pull complete\n9555e854c71e: Pull complete\n3ff38dcf2d51: Pull complete\nDigest: sha256:3b766dda613fcd2dce50e4e2ba6ef9ae0e322a52ca1fff6d9e466a06e2a8a0e6\nStatus: Downloaded newer image "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".3.124:8082/vuejs/ci:latest\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos3 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br")])]),n("p",[s._v("显示从8082私服下载，也就是private+public（hub），显然是从private下载的，速度非常快。")]),s._v(" "),n("h2",{attrs:{id:"总结："}},[n("a",{staticClass:"header-anchor",attrs:{href:"#总结："}},[s._v("#")]),s._v(" 总结：")]),s._v(" "),n("ul",[n("li",[s._v("仅仅使用http。没有SSL。docker镜像能够客户端-服务器畅通。")])]),s._v(" "),n("table",[n("thead",[n("tr",[n("th"),s._v(" "),n("th",[s._v("docker-group")]),s._v(" "),n("th",[s._v("docker-private")])])]),s._v(" "),n("tbody",[n("tr",[n("td",[s._v("pull")]),s._v(" "),n("td",[s._v("没有就下载（因为里边有代理库）")]),s._v(" "),n("td",[s._v("没有就NG（里面没有代理库）")])]),s._v(" "),n("tr",[n("td",[s._v("push")]),s._v(" "),n("td",[s._v("Layer already exists（404）")]),s._v(" "),n("td",[s._v("OK")])])])]),s._v(" "),n("hr"),s._v(" "),n("h2",{attrs:{id:"【课题】如果不指定docker-pull-192-168-3-124-8082-node-而是直接docker-pull-node-能让他自动从192-168-3-124：8082-node-？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#【课题】如果不指定docker-pull-192-168-3-124-8082-node-而是直接docker-pull-node-能让他自动从192-168-3-124：8082-node-？"}},[s._v("#")]),s._v(" 【课题】如果不指定docker pull 192.168.3.124:8082/node,而是直接docker pull node, 能让他自动从192.168.3.124：8082/node ？")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("客户端 /etc/docker/daemon.json\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry-mirrors"')]),s._v(":"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"http://192.168.3.124:8082"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(",\n"),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"insecure-registries"')]),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"harbor.ccbjb.com.cn"')]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.3.124:8082"')]),s._v(","),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"192.168.3.124:8083"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl daemon-reload && systemctl restart docker.service")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull node")]),s._v("\nUsing default tag: latest\nlatest: Pulling from library/node\n7e6d8ed60355: Pull complete\n43421f771d04: Pull complete\nc36327c39ae4: Pull complete\n22b0be3e8a61: Pull complete\n6b168feb1bb0: Pull complete\n0a127f2eabe9: Pull complete\nb8ebb87902bd: Pull complete\n74fcd4404a16: Pull complete\ne8efbeec3186: Pull complete\nDigest: sha256:8f367919218e11900dbaea0c399ed33367c43a27e05e54d6d14961aa903cabc6\nStatus: Downloaded newer image "),n("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" node:latest\ndocker.io/library/node:latest\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@centos123 ~"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br")])]),n("p",[s._v("没好使，仍旧从docker.io下载的。而且nexus上的docker各个库中都没有这个镜像，\n说明没有自动下载。")]),s._v(" "),n("h2",{attrs:{id:"难道真的必须写明-ip-8082-imgesname-这样才能私服没有自动下载到私服、私服有从私服下载吗？"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#难道真的必须写明-ip-8082-imgesname-这样才能私服没有自动下载到私服、私服有从私服下载吗？"}},[s._v("#")]),s._v(" 难道真的必须写明 ip:8082/imgesName 这样才能私服没有自动下载到私服、私服有从私服下载吗？")]),s._v(" "),n("p",[s._v("但是看这篇文章，是可行的。\nhttps://blog.csdn.net/Michaelwubo/article/details/80691889\n差哪了呢？")]),s._v(" "),n("p",[s._v("必须写明域名。")])])}),[],!1,null,null,null);a.default=e.exports}}]);