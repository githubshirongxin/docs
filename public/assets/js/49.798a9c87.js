(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{533:function(t,v,a){"use strict";a.r(v);var s=a(59),_=Object(s.a)({},(function(){var t=this,v=t.$createElement,a=t._self._c||v;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[t._v("参考两篇文章：\nhttps://gitlab.com/gitlab-org/gitlab-foss/-/issues/53820\nhttps://docs.gitlab.com/ee/administration/pages/index.html#custom-domains")]),t._v(" "),a("h3",{attrs:{id:"思路："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#思路："}},[t._v("#")]),t._v(" 思路：")]),t._v(" "),a("p",[t._v("公司内部想搭建个人博客和团队用博客、公司整体博客。\n现在看，gitlab本地部署pages，最容易实现的就是个人博客。")]),t._v(" "),a("h4",{attrs:{id:"http还是https"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#http还是https"}},[t._v("#")]),t._v(" http还是https")]),t._v(" "),a("p",[t._v("当然是https好了，但是https需要公钥和私钥。")]),t._v(" "),a("ul",[a("li",[t._v("自签名的公钥和私钥每次访问网页都会提示“不安全”，然后再点击链接强行访问。不够友好。")]),t._v(" "),a("li",[t._v("如果使用FreeSSL.org等")])]),t._v(" "),a("p",[t._v("我就不信了，难道其他公司都使用通配符域名做的公钥私钥吗？")]),t._v(" "),a("h4",{attrs:{id:"个人博客"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#个人博客"}},[t._v("#")]),t._v(" 个人博客")]),t._v(" "),a("p",[t._v("某人自建了vuepress工程，本地gitlab上发布，Runner自动编译之后，网页URL ：http://某人用户名.cjb.io/工程名。")]),t._v(" "),a("h5",{attrs:{id:"问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[t._v("#")]),t._v(" 问题")]),t._v(" "),a("ul",[a("li",[t._v("域名申请，通配符域名申请，域名解析生效的过程。")]),t._v(" "),a("li",[t._v("数字证书颁发的过程。")]),t._v(" "),a("li",[t._v("两者有何顺序和关联？")])]),t._v(" "),a("p",[t._v("这个视频完美地解决了我的问题。\nhttps://www.bilibili.com/video/BV1BA411i7mF?from=search&seid=2045925171014425635")]),t._v(" "),a("p",[t._v("总结如下：\n逻辑：")]),t._v(" "),a("ol",[a("li",[t._v("域名能够申请成功，说明域名唯一性合法性（已付费）。")]),t._v(" "),a("li",[t._v("域名能够添加到NameServer，说明域名已经申请成功。")]),t._v(" "),a("li",[t._v("TXT记录的DNS验证，说明域名申请成功即唯一性合法性。")]),t._v(" "),a("li",[t._v("只要域名申请成功了，就可以颁发证书。证书里对于该网站的一切信息都是作者自己写的，CA不会去验证。")]),t._v(" "),a("li",[t._v("CA的证书仅仅证明该域名已经被验证了。是的，因为SSL证书有两种：域名型证书和企业型证书。")]),t._v(" "),a("li",[t._v("域名型证书CA只负责认证这是个正常的域名。")]),t._v(" "),a("li",[t._v("企业型证书CA除了负责认证这是个正常的域名之外，还要人工审核该企业的信息，确保域名就是该企业的之后，才给你颁发证书。")]),t._v(" "),a("li",[t._v("CA的对企业性证书更有意义。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/docs/images/2020-07-30-09-38-07.png",alt:""}})]),t._v(" "),a("h5",{attrs:{id:"https的数字证书验证原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#https的数字证书验证原理"}},[t._v("#")]),t._v(" HTTPS的数字证书验证原理")]),t._v(" "),a("p",[t._v("HTTPS的数字证书验证原理\nhttps://blog.csdn.net/liuxingrong666/article/details/83869161")]),t._v(" "),a("p",[t._v("讲得最好的颁发证书的过程了。可以自己搭建CA。\nhttps://blog.csdn.net/rookiewyh/article/details/102949016")]),t._v(" "),a("p",[t._v("SSL证书申请，分SSL证书的类型，")]),t._v(" "),a("ul",[a("li",[t._v("最基本的域名型SSL证书，只需要让CA验证这是个合法域名就行，方法是DNS里有TXT记录。CA会生成TXT记录让你写入DNS。让后在CA页面上点验证，返回了CA期待的值才给你下载证书。")]),t._v(" "),a("li",[t._v("企业性证书，CA除了验证域名合法性之外，还需要人工验证企业。")]),t._v(" "),a("li",[t._v("企业增强型证书，CA验证的就更多了。")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/docs/images/2020-07-30-09-45-07.png",alt:""}})]),t._v(" "),a("h5",{attrs:{id:"总结："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结："}},[t._v("#")]),t._v(" 总结：")]),t._v(" "),a("ol",[a("li",[t._v("SSL证书颁发过程中，只有TXT记录的DNS验证与域名申请有点关系。\n顺序是：\n先域名申请\nTXT记录 或 A记录记入DNS\n也就是说，TXT记录的DNS验证，根本不需要A记录。申请个域名，不添加A记录，也能做DNS验证，也就是SSL证书申请颁发。")]),t._v(" "),a("li",[t._v("如果使用本地LDNS的话，CA权威机构是没办法给你颁发SSL证书的，因为DNS解析验证过不去，根本找不到你在局域网里的LDNS。\n所以，想要CA权威的证书，就得用公网DNS！")])]),t._v(" "),a("h5",{attrs:{id:"最后的方案："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后的方案："}},[t._v("#")]),t._v(" 最后的方案：")]),t._v(" "),a("p",[t._v("不申请新的域名了。沿用公司在外网DNS注册的gitlab.ccbjb.com.cn,\n在外网DNS上增加泛域名 *.gitlab.ccbjb.com.cn 解析到 192.168.3.111 IP上。\nhttps方式也不用了，因为申请泛域名每年450元的价格倒是不贵，但考虑到仅仅是公司内部使用，不对外公开的gitlab page。用http也行。")]),t._v(" "),a("p",[t._v("所以，最后定*.gitlab.ccbjb.com.cn 外网DNS增加泛域名的A记录 + 通讯方式使用http。")]),t._v(" "),a("h5",{attrs:{id:"域名申请-域名解析的过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#域名申请-域名解析的过程"}},[t._v("#")]),t._v(" 域名申请+域名解析的过程")]),t._v(" "),a("p",[t._v("这是两个过程 域名申请。就是占用了一个url\n域名解析，就是在某个DNS上绑定url与IP。")]),t._v(" "),a("p",[t._v("一般申请域名和DNS网站：DNSPOD（中国），狗爹（外国）。")]),t._v(" "),a("p",[t._v("https://cloud.tencent.com/developer/article/1401677\n总结：就是分两步，\n注册一个域名。\n第二步，绑定域名和ip，再DNS里增加A记录。\n注册域名的服务器可以是DNS服务器。\n也可以选择其他DNS服务器（NameServer）。")]),t._v(" "),a("h6",{attrs:{id:"（题外话）-todo："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#（题外话）-todo："}},[t._v("#")]),t._v(" （题外话） TODO：")]),t._v(" "),a("ul",[a("li",[t._v("我发现运营和运维有一些专用工具。我需要专门学习学习。")]),t._v(" "),a("li",[t._v("宝塔面板，运营人员使用 https://www.bt.cn/")])])])}),[],!1,null,null,null);v.default=_.exports}}]);