(window.webpackJsonp=window.webpackJsonp||[]).push([[105],{591:function(s,e,a){"use strict";a.r(e);var n=a(59),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_1-存活情况和可读情况调查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-存活情况和可读情况调查"}},[s._v("#")]),s._v(" 1. 存活情况和可读情况调查")]),s._v(" "),a("p",[s._v("Kubernetes通常能够检测容器问题并做出适当响应，而无需进行专门配置。但是有时我们需要对Kubernetes如何确定容器状态的其他控制。Kubernetes探针提供了自定义Kubernetes如何检测容器状态的功能，从而使我们能够建立更复杂的机制来管理容器的运行状况。在本课程中，我们将讨论Kubernetes中的活动性和就绪性探测，并演示如何创建和配置它们。")]),s._v(" "),a("h3",{attrs:{id:"相关文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文件"}},[s._v("#")]),s._v(" 相关文件")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://kubernetes.io/docs/concepts/workloads/pods/pod-lifecycle/#container-probes"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"课程参考"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#课程参考"}},[s._v("#")]),s._v(" 课程参考")]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("Liveness probe:是自定义“活着”的判定条件。")])]),s._v(" "),a("p",[a("code",[s._v("my-liveness-pod.yml")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-liveness-pod\nspec:\n  containers:\n  - name: myapp-container\n    image: busybox\n    command: ['sh', '-c', \"echo Hello, Kubernetes! && sleep 3600\"]\n    livenessProbe:\n      exec:\n        command:\n        - echo\n        - testing\n      initialDelaySeconds: 5\n      periodSeconds: 5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("Readness Probe: 自己设置是否pod可以开始服务的标准。")])]),s._v(" "),a("p",[s._v("这是带有使用http请求的就绪探测器的pod：")]),s._v(" "),a("p",[a("code",[s._v("my-readiness-pod.yml")]),s._v("：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("apiVersion: v1\nkind: Pod\nmetadata:\n  name: my-readiness-pod\nspec:\n  containers:\n  - name: myapp-container\n    image: nginx\n    readinessProbe:\n      httpGet:\n        path: /\n        port: 80\n      initialDelaySeconds: 5\n      periodSeconds: 5\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("div",{staticClass:"custom-block danger"},[a("p",{staticClass:"custom-block-title"},[s._v("关键得理解他们存在的背景：")]),s._v(" "),a("ul",[a("li",[s._v("一些讲究得pod，需要如此。")]),s._v(" "),a("li",[s._v("因为pod得初始化挺花时间，所以得有把握开始服务才开始访问。")]),s._v(" "),a("li",[s._v("改善客户体验。")])])]),s._v(" "),a("p",[a("strong",[s._v("用下面的命令获得pod的状态：")]),s._v(" "),a("img",{attrs:{src:"/docs/images/2020-09-10-10-26-49.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"_2-容器日志-kubectl-logs-podname-c-containername"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-容器日志-kubectl-logs-podname-c-containername"}},[s._v("#")]),s._v(" 2. 容器日志 kubectl logs podName -c containerName")]),s._v(" "),a("p",[s._v("在管理容器时，有时需要获取容器日志以深入了解容器内部的情况。Kubernetes提供了一种使用"),a("code",[s._v("kubectl logs")]),s._v("命令查看容器日志并与之交互的简便方法。在本课程中，我们将讨论容器日志，并演示如何使用来访问它们"),a("code",[s._v("kubectl logs")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"相关文件-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文件-2"}},[s._v("#")]),s._v(" 相关文件")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://kubernetes.io/docs/concepts/cluster-administration/logging/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://kubernetes.io/docs/concepts/cluster-administration/logging/"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"课程参考-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#课程参考-2"}},[s._v("#")]),s._v(" 课程参考")]),s._v(" "),a("p",[s._v("每秒生成日志输出的示例窗格：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("apiVersion: v1\nkind: Pod\nmetadata:\n  name: counter\nspec:\n  containers:\n  - name: count\n    image: busybox\n    args: [/bin/sh, -c, 'i=0; while true; do echo \"$i: $(date)\"; i=$((i+1)); sleep 1; done']\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("p",[s._v("获取容器的日志：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl logs counter\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("对于多容器容器，使用该"),a("code",[s._v("-c")]),s._v("标志指定要获取日志的容器：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl logs <pod name> -c <container name>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将容器日志保存到文件：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl logs counter > counter.log\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"_3-安装指标服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装指标服务器"}},[s._v("#")]),s._v(" 3. 安装指标服务器")]),s._v(" "),a("p",[s._v("为了练习使用Kubernetes中的某些监视功能，您的集群中将需要一个正在运行的指标服务器。无需知道如何安装指标服务器即可通过考试，但是如果您继续进行，则需要将其安装在练习集群中。在本课程中，我们将快速轻松地在您的练习集群中安装指标服务器。")]),s._v(" "),a("h3",{attrs:{id:"课程参考-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#课程参考-3"}},[s._v("#")]),s._v(" 课程参考")]),s._v(" "),a("p",[s._v("克隆度量服务器回购并使用"),a("code",[s._v("kubectl apply")]),s._v("以下命令安装服务器：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd ~/\ngit clone https://github.com/linuxacademy/metrics-server\nkubectl apply -f ~/metrics-server/deploy/1.8+/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("一旦安装了指标服务器，就可以使用以下命令来验证它是否响应：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl get --raw /apis/metrics.k8s.io/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("疑问：")]),s._v(" "),a("p",[s._v("指标服务器，上面的命令都正常。\n然后怎么使用？")])]),s._v(" "),a("h2",{attrs:{id:"_4-监控应用程序-kubectl-top-pods-podname可选-kubectl-top-nodes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-监控应用程序-kubectl-top-pods-podname可选-kubectl-top-nodes"}},[s._v("#")]),s._v(" 4. 监控应用程序 kubectl top pods podName可选，kubectl top nodes")]),s._v(" "),a("p",[s._v("监视是管理任何应用程序基础结构的重要组成部分。在本课程中，我们将讨论如何使用"),a("code",[s._v("kubectl top")]),s._v("命令查看Pod和节点的资源使用情况。")]),s._v(" "),a("h3",{attrs:{id:"相关文件-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文件-3"}},[s._v("#")]),s._v(" 相关文件")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://kubernetes.io/docs/tasks/debug-application-cluster/resource-usage-monitoring/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://kubernetes.io/docs/tasks/debug-application-cluster/resource-usage-monitoring/"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"课程参考-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#课程参考-4"}},[s._v("#")]),s._v(" 课程参考")]),s._v(" "),a("p",[s._v("这是一些可以用来测试的示例豆荚"),a("code",[s._v("kubectl top")]),s._v("。它们分别设计为使用大约300m和100m CPU。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("apiVersion: v1\nkind: Pod\nmetadata:\n  name: resource-consumer-big\nspec:\n  containers:\n  - name: resource-consumer\n    image: gcr.io/kubernetes-e2e-test-images/resource-consumer:1.4\n    resources:\n      requests:\n        cpu: 500m\n        memory: 128Mi\n  - name: busybox-sidecar\n    image: radial/busyboxplus:curl\n    command: [/bin/sh, -c, 'until curl localhost:8080/ConsumeCPU -d \"millicores=300&durationSec=3600\"; do sleep 5; done && sleep 3700']\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("apiVersion: v1\nkind: Pod\nmetadata:\n  name: resource-consumer-small\nspec:\n  containers:\n  - name: resource-consumer\n    image: gcr.io/kubernetes-e2e-test-images/resource-consumer:1.4\n    resources:\n      requests:\n        cpu: 500m\n        memory: 128Mi\n  - name: busybox-sidecar\n    image: radial/busyboxplus:curl\n    command: [/bin/sh, -c, 'until curl localhost:8080/ConsumeCPU -d \"millicores=100&durationSec=3600\"; do sleep 5; done && sleep 3700']\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("这是本课程中用于查看集群中资源使用情况数据的命令：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl top pods\nkubectl top pod resource-consumer-big\nkubectl top pods -n kube-system\nkubectl top nodes\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"_5-调试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-调试"}},[s._v("#")]),s._v(" 5. 调试")]),s._v(" "),a("p",[s._v("任何系统中都会出现问题，Kubernetes提供了一些很棒的工具来帮助发现和修复集群中出现的问题。在本课程中，我们将介绍调试Kubernetes中的问题的过程。我们将利用我们的知识"),a("code",[s._v("kubectl get")]),s._v("并"),a("code",[s._v("kubectl describe")]),s._v("找到损坏的吊舱，然后探索编辑Kubernetes对象以解决问题的各种方法。")]),s._v(" "),a("h3",{attrs:{id:"相关文件-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#相关文件-4"}},[s._v("#")]),s._v(" 相关文件")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://kubernetes.io/docs/tasks/debug-application-cluster/debug-application/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://kubernetes.io/docs/tasks/debug-application-cluster/debug-application/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://kubernetes.io/docs/tasks/debug-application-cluster/debug-pod-replication-controller/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://kubernetes.io/docs/tasks/debug-application-cluster/debug-pod-replication-controller/"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://kubernetes.io/docs/tasks/debug-application-cluster/debug-service/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://kubernetes.io/docs/tasks/debug-application-cluster/debug-service/"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"课程参考-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#课程参考-5"}},[s._v("#")]),s._v(" 课程参考")]),s._v(" "),a("p",[s._v("我在视频之前通过在"),a("code",[s._v("nginx-ns")]),s._v("命名空间中创建一个损坏的Pod来准备群集：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl create namespace nginx-ns\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("apiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\n  namespace: nginx-ns\nspec:\n  containers:\n  - name: nginx\n    image: nginx:1.158\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h4",{attrs:{id:"探索集群以查找问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#探索集群以查找问题"}},[s._v("#")]),s._v(" 探索集群以查找问题")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl get pods\n\nkubectl get namespace\n\nkubectl get pods --all-namespaces\n\nkubectl describe pod nginx -n nginx-ns\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h4",{attrs:{id:"修复损坏的图像名称"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修复损坏的图像名称"}},[s._v("#")]),s._v(" 修复损坏的图像名称")]),s._v(" "),a("p",[s._v("编辑广告连播：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# kubectl edit pod nginx -n nginx-ns")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将容器图像更改为"),a("code",[s._v("nginx:1.15.8")]),s._v("。")]),s._v(" "),a("h4",{attrs:{id:"导出描述符以编辑和重新创建容器。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#导出描述符以编辑和重新创建容器。"}},[s._v("#")]),s._v(" 导出描述符以编辑和重新创建容器。")]),s._v(" "),a("p",[s._v("导出pod描述符并将其保存到文件中：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl get pod nginx -n nginx-ns -o yaml --export > nginx-pod.yml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("将此活动探针添加到容器规范中：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("livenessProbe:\n  httpGet:\n    path: /\n    port: 80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("删除吊舱并使用描述符文件重新创建。确保指定名称空间：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("kubectl delete pod nginx -n nginx-ns\n\nkubectl apply -f nginx-pod.yml -n nginx-ns\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])])}),[],!1,null,null,null);e.default=t.exports}}]);