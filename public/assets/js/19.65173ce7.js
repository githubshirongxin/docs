(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{502:function(s,t,a){"use strict";a.r(t);var e=a(59),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("ol",[a("li",[s._v("生成jks")])]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("keytool -genkey -alias www.sys2.com -keyalg RSA -keystore www.ca.com.jks -storepass "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("123")]),s._v(".com\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ol",{attrs:{start:"2"}},[a("li",[s._v("Eclipse的Servers（自动生成的）对应工程修改Server.xml\n增加")])]),s._v(" "),a("div",{staticClass:"language-xml line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-xml"}},[a("code",[s._v("  "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("<")]),s._v("Connector")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("port")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("443"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("     \n      "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("protocol")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("org.apache.coyote.http11.Http11NioProtocol"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n            "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("maxThreads")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("200"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("scheme")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("https"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("secure")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("SSLEnabled")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("keystoreFile")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("conf/www.ca.com.jks"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("keystorePass")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("123.com"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v("\n           "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("clientAuth")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("false"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[s._v("sslProtocol")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')]),s._v("TLS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("/>")])]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[a("img",{attrs:{src:"/docs/images/2021-02-01-14-25-59.png",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"3"}},[a("li",[a("p",[s._v("tomcat安装目录下/conf/放入.jks文件。")])]),s._v(" "),a("li",[a("p",[s._v("操作Eclipse 的Server面板\n"),a("img",{attrs:{src:"/docs/images/2021-02-01-14-26-45.png",alt:""}})])])]),s._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[s._v("WARNING")]),s._v(" "),a("p",[s._v("关键操作来了！！ publish")])]),s._v(" "),a("p",[s._v("右键publish，就会把tomcat安装目录/conf/*.jks文件拷贝到Eclipse的工作目录。\n有时候也不好用，干脆直接拷贝到错误提示的目录即可。"),a("code",[s._v("Caused by: java.lang.IllegalArgumentException: F:\\work\\eclipseworkspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\conf\\www.sys1.com.jks (系统找不到指定的文件。)")])]),s._v(" "),a("p",[a("img",{attrs:{src:"/docs/images/2021-02-01-14-26-57.png",alt:""}})]),s._v(" "),a("p",[s._v("然后可见，端口就自动增加了443端口。如果没有出现443端口，关掉下列\n"),a("img",{attrs:{src:"/docs/images/2021-02-01-14-36-18.png",alt:""}}),s._v("\n再重开（双击下面）就可以看到了。\n"),a("img",{attrs:{src:"/docs/images/2021-02-01-14-36-47.png",alt:""}})]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[a("p",[s._v("访问的时候http://www.ca.com/login 这样就行。")])]),s._v(" "),a("li",[a("p",[s._v("www.sys1.com设置的时候基本和www.ca.com一样。但是端口就不能是443了，和ca.com冲突。\n需要设置成8443. 访问时 https://www.sys1.com:8443/cookie_set?vt=123")])])]),s._v(" "),a("h2",{attrs:{id:"参考：如果eclipse找不到jks-出现下列错误。"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考：如果eclipse找不到jks-出现下列错误。"}},[s._v("#")]),s._v(" 参考：如果Eclipse找不到jks,出现下列错误。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:472)\nCaused by: java.lang.IllegalArgumentException: F:\\work\\eclipseworkspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\conf\\www.sys1.com.jks (系统找不到指定的文件。)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("www.sys1.com.jks应该放到哪呢？")]),s._v(" "),a("p",[s._v("首先放到\nD:\\apache-tomcat-9.0.41\\conf\n然后Eclipse点Republish，这样就把www.sys1.com.jsk拷贝到eclipse里的临时目录。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("F:\\work\\eclipseworkspace\\.metadata\\.plugins\\org.eclipse.wst.server.core\\tmp0\\conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/docs/images/2021-02-01-13-51-41.png",alt:""}})]),s._v(" "),a("p",[s._v("Eclipse的配置是这样的。\n"),a("img",{attrs:{src:"/docs/images/2021-02-01-13-52-04.png",alt:""}})])])}),[],!1,null,null,null);t.default=n.exports}}]);