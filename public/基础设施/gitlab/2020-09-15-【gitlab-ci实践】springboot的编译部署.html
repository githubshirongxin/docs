<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>【gitla-ci发布实践】SpringBoot的编译部署 | 积累</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/docs/logo.png">
    <link rel="icon" href="/docs/logo.png">
    <link rel="manifest" href="/docs/manifest.json">
    <link rel="apple-touch-icon" href="/docs/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/docs/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <meta name="description" content="共享库">
    <meta name="name" content="cjb的资料库">
    <meta name="keywords" content="k8s,微服务,gitlab,分布式存储">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    <link rel="preload" href="/docs/assets/css/0.styles.27bfdfe7.css" as="style"><link rel="preload" href="/docs/assets/js/app.b0b4daf6.js" as="script"><link rel="preload" href="/docs/assets/js/5.379e7eff.js" as="script"><link rel="preload" href="/docs/assets/js/2.28087ae7.js" as="script"><link rel="preload" href="/docs/assets/js/67.69b9b0a8.js" as="script"><link rel="preload" href="/docs/assets/js/3.32492e15.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.768ffbd2.js"><link rel="prefetch" href="/docs/assets/js/100.360834da.js"><link rel="prefetch" href="/docs/assets/js/101.22e8995e.js"><link rel="prefetch" href="/docs/assets/js/102.e258ea9a.js"><link rel="prefetch" href="/docs/assets/js/103.5a54eae9.js"><link rel="prefetch" href="/docs/assets/js/104.5bc08c0a.js"><link rel="prefetch" href="/docs/assets/js/105.a460b3d3.js"><link rel="prefetch" href="/docs/assets/js/106.4152947f.js"><link rel="prefetch" href="/docs/assets/js/107.c3f74448.js"><link rel="prefetch" href="/docs/assets/js/108.e95010b6.js"><link rel="prefetch" href="/docs/assets/js/109.8f60bd48.js"><link rel="prefetch" href="/docs/assets/js/11.a00e54f4.js"><link rel="prefetch" href="/docs/assets/js/110.fa0bb8d8.js"><link rel="prefetch" href="/docs/assets/js/111.e8a1d4c7.js"><link rel="prefetch" href="/docs/assets/js/112.b618fb17.js"><link rel="prefetch" href="/docs/assets/js/113.0b824b88.js"><link rel="prefetch" href="/docs/assets/js/114.56f10863.js"><link rel="prefetch" href="/docs/assets/js/115.dc4a62df.js"><link rel="prefetch" href="/docs/assets/js/116.b80711c1.js"><link rel="prefetch" href="/docs/assets/js/117.954c7b0f.js"><link rel="prefetch" href="/docs/assets/js/118.396c963b.js"><link rel="prefetch" href="/docs/assets/js/119.edb22fc2.js"><link rel="prefetch" href="/docs/assets/js/12.3d935dc0.js"><link rel="prefetch" href="/docs/assets/js/120.e8342230.js"><link rel="prefetch" href="/docs/assets/js/121.45bf1c80.js"><link rel="prefetch" href="/docs/assets/js/122.1d468ba3.js"><link rel="prefetch" href="/docs/assets/js/123.50bef1ef.js"><link rel="prefetch" href="/docs/assets/js/124.45726fc9.js"><link rel="prefetch" href="/docs/assets/js/125.9b4401ae.js"><link rel="prefetch" href="/docs/assets/js/126.7eea5556.js"><link rel="prefetch" href="/docs/assets/js/127.a8517055.js"><link rel="prefetch" href="/docs/assets/js/128.6ac906cf.js"><link rel="prefetch" href="/docs/assets/js/129.bccc7f55.js"><link rel="prefetch" href="/docs/assets/js/13.4cc61505.js"><link rel="prefetch" href="/docs/assets/js/130.5cc83542.js"><link rel="prefetch" href="/docs/assets/js/131.ef3cab21.js"><link rel="prefetch" href="/docs/assets/js/132.34c5c573.js"><link rel="prefetch" href="/docs/assets/js/133.fc3d8ffb.js"><link rel="prefetch" href="/docs/assets/js/134.ab60924b.js"><link rel="prefetch" href="/docs/assets/js/135.8170420b.js"><link rel="prefetch" href="/docs/assets/js/136.50058d3c.js"><link rel="prefetch" href="/docs/assets/js/137.7b09547b.js"><link rel="prefetch" href="/docs/assets/js/138.b8025ac0.js"><link rel="prefetch" href="/docs/assets/js/139.71de9c71.js"><link rel="prefetch" href="/docs/assets/js/14.805cd60c.js"><link rel="prefetch" href="/docs/assets/js/140.482d5810.js"><link rel="prefetch" href="/docs/assets/js/141.c32e79fe.js"><link rel="prefetch" href="/docs/assets/js/142.76c30e19.js"><link rel="prefetch" href="/docs/assets/js/143.69128b01.js"><link rel="prefetch" href="/docs/assets/js/144.a4bacfc9.js"><link rel="prefetch" href="/docs/assets/js/145.39aa758f.js"><link rel="prefetch" href="/docs/assets/js/146.8a0af233.js"><link rel="prefetch" href="/docs/assets/js/147.ceb21ecb.js"><link rel="prefetch" href="/docs/assets/js/148.10e541da.js"><link rel="prefetch" href="/docs/assets/js/149.c012cbe2.js"><link rel="prefetch" href="/docs/assets/js/15.3e3221bc.js"><link rel="prefetch" href="/docs/assets/js/150.bba1b1bb.js"><link rel="prefetch" href="/docs/assets/js/151.de15da20.js"><link rel="prefetch" href="/docs/assets/js/152.840dc4db.js"><link rel="prefetch" href="/docs/assets/js/153.03f4c0f4.js"><link rel="prefetch" href="/docs/assets/js/154.538f58b9.js"><link rel="prefetch" href="/docs/assets/js/155.5d4357b0.js"><link rel="prefetch" href="/docs/assets/js/156.d2b1c53d.js"><link rel="prefetch" href="/docs/assets/js/157.898a3e43.js"><link rel="prefetch" href="/docs/assets/js/158.03181494.js"><link rel="prefetch" href="/docs/assets/js/159.5705ed64.js"><link rel="prefetch" href="/docs/assets/js/16.ae4d45c1.js"><link rel="prefetch" href="/docs/assets/js/160.26fb95c1.js"><link rel="prefetch" href="/docs/assets/js/161.60a530a7.js"><link rel="prefetch" href="/docs/assets/js/162.2e83f591.js"><link rel="prefetch" href="/docs/assets/js/163.5ac91721.js"><link rel="prefetch" href="/docs/assets/js/164.c32d0c1f.js"><link rel="prefetch" href="/docs/assets/js/165.87df0444.js"><link rel="prefetch" href="/docs/assets/js/166.169a9eed.js"><link rel="prefetch" href="/docs/assets/js/167.77a570d8.js"><link rel="prefetch" href="/docs/assets/js/168.998b7f5d.js"><link rel="prefetch" href="/docs/assets/js/169.b0db43c4.js"><link rel="prefetch" href="/docs/assets/js/17.0ac12b3a.js"><link rel="prefetch" href="/docs/assets/js/170.2f4cee47.js"><link rel="prefetch" href="/docs/assets/js/171.cc83d950.js"><link rel="prefetch" href="/docs/assets/js/172.15f6ccff.js"><link rel="prefetch" href="/docs/assets/js/173.73567797.js"><link rel="prefetch" href="/docs/assets/js/174.4543d079.js"><link rel="prefetch" href="/docs/assets/js/175.5046ca61.js"><link rel="prefetch" href="/docs/assets/js/176.61c1f967.js"><link rel="prefetch" href="/docs/assets/js/177.aaacda02.js"><link rel="prefetch" href="/docs/assets/js/178.47d861a3.js"><link rel="prefetch" href="/docs/assets/js/179.d61af72e.js"><link rel="prefetch" href="/docs/assets/js/18.814b2cf9.js"><link rel="prefetch" href="/docs/assets/js/180.3b86c38d.js"><link rel="prefetch" href="/docs/assets/js/181.ca13ba44.js"><link rel="prefetch" href="/docs/assets/js/182.bb63dcb0.js"><link rel="prefetch" href="/docs/assets/js/183.68e153de.js"><link rel="prefetch" href="/docs/assets/js/184.244c5b0d.js"><link rel="prefetch" href="/docs/assets/js/185.84526e8d.js"><link rel="prefetch" href="/docs/assets/js/186.b1d8c871.js"><link rel="prefetch" href="/docs/assets/js/187.ced3f6fa.js"><link rel="prefetch" href="/docs/assets/js/188.3a654a36.js"><link rel="prefetch" href="/docs/assets/js/189.20cfe2bb.js"><link rel="prefetch" href="/docs/assets/js/19.d42ceb53.js"><link rel="prefetch" href="/docs/assets/js/190.d9699671.js"><link rel="prefetch" href="/docs/assets/js/191.841e1270.js"><link rel="prefetch" href="/docs/assets/js/192.557d9d8a.js"><link rel="prefetch" href="/docs/assets/js/193.d393afee.js"><link rel="prefetch" href="/docs/assets/js/194.8ee2957b.js"><link rel="prefetch" href="/docs/assets/js/195.9d8185a7.js"><link rel="prefetch" href="/docs/assets/js/196.3719fc70.js"><link rel="prefetch" href="/docs/assets/js/197.44638253.js"><link rel="prefetch" href="/docs/assets/js/198.901e7fe9.js"><link rel="prefetch" href="/docs/assets/js/199.9d275600.js"><link rel="prefetch" href="/docs/assets/js/20.b4972190.js"><link rel="prefetch" href="/docs/assets/js/200.f0c000e3.js"><link rel="prefetch" href="/docs/assets/js/201.3c6852a9.js"><link rel="prefetch" href="/docs/assets/js/202.597faeb8.js"><link rel="prefetch" href="/docs/assets/js/203.8471c32f.js"><link rel="prefetch" href="/docs/assets/js/204.1e995960.js"><link rel="prefetch" href="/docs/assets/js/205.34dd904d.js"><link rel="prefetch" href="/docs/assets/js/206.e42776fd.js"><link rel="prefetch" href="/docs/assets/js/207.cce26d0f.js"><link rel="prefetch" href="/docs/assets/js/208.b9dd911f.js"><link rel="prefetch" href="/docs/assets/js/209.68f638fc.js"><link rel="prefetch" href="/docs/assets/js/21.3e73e903.js"><link rel="prefetch" href="/docs/assets/js/210.d4ad8374.js"><link rel="prefetch" href="/docs/assets/js/211.192cd494.js"><link rel="prefetch" href="/docs/assets/js/22.a391037b.js"><link rel="prefetch" href="/docs/assets/js/23.b05a727f.js"><link rel="prefetch" href="/docs/assets/js/24.b052e74b.js"><link rel="prefetch" href="/docs/assets/js/25.03df6a6e.js"><link rel="prefetch" href="/docs/assets/js/26.e2160dfe.js"><link rel="prefetch" href="/docs/assets/js/27.13fcea5e.js"><link rel="prefetch" href="/docs/assets/js/28.381c8ba5.js"><link rel="prefetch" href="/docs/assets/js/29.df48473f.js"><link rel="prefetch" href="/docs/assets/js/30.8b586d8e.js"><link rel="prefetch" href="/docs/assets/js/31.957fb45d.js"><link rel="prefetch" href="/docs/assets/js/32.3e8a9db3.js"><link rel="prefetch" href="/docs/assets/js/33.74e3e3df.js"><link rel="prefetch" href="/docs/assets/js/34.7ce3806f.js"><link rel="prefetch" href="/docs/assets/js/35.6837a3b4.js"><link rel="prefetch" href="/docs/assets/js/36.98c861d2.js"><link rel="prefetch" href="/docs/assets/js/37.c2e18cc5.js"><link rel="prefetch" href="/docs/assets/js/38.3121b9aa.js"><link rel="prefetch" href="/docs/assets/js/39.172e550b.js"><link rel="prefetch" href="/docs/assets/js/4.9b80f759.js"><link rel="prefetch" href="/docs/assets/js/40.510b5b92.js"><link rel="prefetch" href="/docs/assets/js/41.9c65dce9.js"><link rel="prefetch" href="/docs/assets/js/42.e94f7968.js"><link rel="prefetch" href="/docs/assets/js/43.ff6d17ab.js"><link rel="prefetch" href="/docs/assets/js/44.e7c4ba59.js"><link rel="prefetch" href="/docs/assets/js/45.7d74b7f0.js"><link rel="prefetch" href="/docs/assets/js/46.b1b46945.js"><link rel="prefetch" href="/docs/assets/js/47.799e135e.js"><link rel="prefetch" href="/docs/assets/js/48.36e0ef32.js"><link rel="prefetch" href="/docs/assets/js/49.fff4c74e.js"><link rel="prefetch" href="/docs/assets/js/50.b711df31.js"><link rel="prefetch" href="/docs/assets/js/51.0d519712.js"><link rel="prefetch" href="/docs/assets/js/52.5d1fd24d.js"><link rel="prefetch" href="/docs/assets/js/53.780d75ae.js"><link rel="prefetch" href="/docs/assets/js/54.9ceb88b2.js"><link rel="prefetch" href="/docs/assets/js/55.25f81376.js"><link rel="prefetch" href="/docs/assets/js/56.ccd115e7.js"><link rel="prefetch" href="/docs/assets/js/57.ab1b4fda.js"><link rel="prefetch" href="/docs/assets/js/58.eda88050.js"><link rel="prefetch" href="/docs/assets/js/59.6970beb7.js"><link rel="prefetch" href="/docs/assets/js/6.d4972abb.js"><link rel="prefetch" href="/docs/assets/js/60.8aeb41ef.js"><link rel="prefetch" href="/docs/assets/js/61.cd17be2b.js"><link rel="prefetch" href="/docs/assets/js/62.eed064e1.js"><link rel="prefetch" href="/docs/assets/js/63.165e4716.js"><link rel="prefetch" href="/docs/assets/js/64.6b82d20d.js"><link rel="prefetch" href="/docs/assets/js/65.d813ba42.js"><link rel="prefetch" href="/docs/assets/js/66.ea7a83a4.js"><link rel="prefetch" href="/docs/assets/js/68.3c997cbe.js"><link rel="prefetch" href="/docs/assets/js/69.46cd209a.js"><link rel="prefetch" href="/docs/assets/js/7.6b204d57.js"><link rel="prefetch" href="/docs/assets/js/70.334fbf08.js"><link rel="prefetch" href="/docs/assets/js/71.097683b5.js"><link rel="prefetch" href="/docs/assets/js/72.fea3fc78.js"><link rel="prefetch" href="/docs/assets/js/73.4375be53.js"><link rel="prefetch" href="/docs/assets/js/74.15ad6ebe.js"><link rel="prefetch" href="/docs/assets/js/75.17f699d9.js"><link rel="prefetch" href="/docs/assets/js/76.a255ff16.js"><link rel="prefetch" href="/docs/assets/js/77.5ee630ff.js"><link rel="prefetch" href="/docs/assets/js/78.d324433f.js"><link rel="prefetch" href="/docs/assets/js/79.425acc67.js"><link rel="prefetch" href="/docs/assets/js/8.274b5a60.js"><link rel="prefetch" href="/docs/assets/js/80.9af95b3d.js"><link rel="prefetch" href="/docs/assets/js/81.00de6b01.js"><link rel="prefetch" href="/docs/assets/js/82.23ffeda0.js"><link rel="prefetch" href="/docs/assets/js/83.8d34b3df.js"><link rel="prefetch" href="/docs/assets/js/84.13ad572b.js"><link rel="prefetch" href="/docs/assets/js/85.4ebd8904.js"><link rel="prefetch" href="/docs/assets/js/86.c4fef041.js"><link rel="prefetch" href="/docs/assets/js/87.8441ccb2.js"><link rel="prefetch" href="/docs/assets/js/88.939299c6.js"><link rel="prefetch" href="/docs/assets/js/89.f7c5fa38.js"><link rel="prefetch" href="/docs/assets/js/9.3ca25612.js"><link rel="prefetch" href="/docs/assets/js/90.a3a77068.js"><link rel="prefetch" href="/docs/assets/js/91.5f3bc737.js"><link rel="prefetch" href="/docs/assets/js/92.98e00d57.js"><link rel="prefetch" href="/docs/assets/js/93.2c8d2bec.js"><link rel="prefetch" href="/docs/assets/js/94.daf5c558.js"><link rel="prefetch" href="/docs/assets/js/95.9d006ca8.js"><link rel="prefetch" href="/docs/assets/js/96.df3a42be.js"><link rel="prefetch" href="/docs/assets/js/97.b9eb6441.js"><link rel="prefetch" href="/docs/assets/js/98.a274c514.js"><link rel="prefetch" href="/docs/assets/js/99.f9cfb6f6.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.27bfdfe7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/logo.png" alt="积累" class="logo"> <span class="site-name can-hide">积累</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础设施" class="dropdown-title"><span class="title">基础设施</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/基础设施/linux-powshell/windows/" class="nav-link">
  windows
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/linux-powshell/" class="nav-link">
  linux-powshell
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/maven-nexus/" class="nav-link">
  maven-nexus
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/vuepress/" class="nav-link">
  vuepress
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/eclipse/" class="nav-link">
  eclipse
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/gitlab/" class="nav-link">
  gitlab
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/vscode/" class="nav-link">
  vscode
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/高可用系统/" class="nav-link">
  高可用系统
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/NFS/" class="nav-link">
  NFS
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/k8s/" class="nav-link">
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/" class="nav-link">
  基础设施
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动端" class="dropdown-title"><span class="title">移动端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/移动端/跨平台/react-native/" class="nav-link">
  react-native
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/跨平台/flutter/" class="nav-link">
  flutter
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/ios/" class="nav-link">
  ios
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/跨平台/" class="nav-link">
  跨平台
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/安卓/" class="nav-link">
  安卓
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/" class="nav-link">
  移动端
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/后端/elasticSearch/" class="nav-link">
  elasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/springcloud/" class="nav-link">
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/springboot/" class="nav-link">
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/kotlin/" class="nav-link">
  kotlin
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/golang/" class="nav-link">
  golang
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/nodejs/" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/微服务/" class="nav-link">
  微服务
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="底层研究" class="dropdown-title"><span class="title">底层研究</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/底层研究/nginx源码分析/" class="nav-link">
  nginx源码分析
</a></li><li class="dropdown-item"><!----> <a href="/docs/底层研究/linux内核/" class="nav-link">
  linux内核
</a></li><li class="dropdown-item"><!----> <a href="/docs/底层研究/网络编程/" class="nav-link">
  网络编程
</a></li><li class="dropdown-item"><!----> <a href="/docs/底层研究/" class="nav-link">
  底层研究
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="媒体" class="dropdown-title"><span class="title">媒体</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/媒体/nginx直播点播/" class="nav-link">
  nginx直播点播
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="application" class="dropdown-title"><span class="title">application</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/application/" class="nav-link">
  application
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="偏硬件5G" class="dropdown-title"><span class="title">偏硬件5G</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/偏硬件5G/C++/" class="nav-link">
  C++
</a></li><li class="dropdown-item"><!----> <a href="/docs/偏硬件5G/汇编/" class="nav-link">
  汇编
</a></li><li class="dropdown-item"><!----> <a href="/docs/偏硬件5G/C/" class="nav-link">
  C
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微信相关" class="dropdown-title"><span class="title">微信相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/微信相关/小程序/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/docs/微信相关/" class="nav-link">
  微信相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="基础设施" class="dropdown-title"><span class="title">基础设施</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/基础设施/linux-powshell/windows/" class="nav-link">
  windows
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/linux-powshell/" class="nav-link">
  linux-powshell
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/maven-nexus/" class="nav-link">
  maven-nexus
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/vuepress/" class="nav-link">
  vuepress
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/eclipse/" class="nav-link">
  eclipse
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/docker/" class="nav-link">
  docker
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/gitlab/" class="nav-link">
  gitlab
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/vscode/" class="nav-link">
  vscode
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/高可用系统/" class="nav-link">
  高可用系统
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/NFS/" class="nav-link">
  NFS
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/git/" class="nav-link">
  git
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/k8s/" class="nav-link">
  k8s
</a></li><li class="dropdown-item"><!----> <a href="/docs/基础设施/" class="nav-link">
  基础设施
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="移动端" class="dropdown-title"><span class="title">移动端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/移动端/跨平台/react-native/" class="nav-link">
  react-native
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/跨平台/flutter/" class="nav-link">
  flutter
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/ios/" class="nav-link">
  ios
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/跨平台/" class="nav-link">
  跨平台
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/安卓/" class="nav-link">
  安卓
</a></li><li class="dropdown-item"><!----> <a href="/docs/移动端/" class="nav-link">
  移动端
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="后端" class="dropdown-title"><span class="title">后端</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/后端/elasticSearch/" class="nav-link">
  elasticSearch
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/springcloud/" class="nav-link">
  springcloud
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/springboot/" class="nav-link">
  springboot
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/kotlin/" class="nav-link">
  kotlin
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/golang/" class="nav-link">
  golang
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/nodejs/" class="nav-link">
  nodejs
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/python/" class="nav-link">
  python
</a></li><li class="dropdown-item"><!----> <a href="/docs/后端/微服务/" class="nav-link">
  微服务
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="底层研究" class="dropdown-title"><span class="title">底层研究</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/底层研究/nginx源码分析/" class="nav-link">
  nginx源码分析
</a></li><li class="dropdown-item"><!----> <a href="/docs/底层研究/linux内核/" class="nav-link">
  linux内核
</a></li><li class="dropdown-item"><!----> <a href="/docs/底层研究/网络编程/" class="nav-link">
  网络编程
</a></li><li class="dropdown-item"><!----> <a href="/docs/底层研究/" class="nav-link">
  底层研究
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="媒体" class="dropdown-title"><span class="title">媒体</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/媒体/nginx直播点播/" class="nav-link">
  nginx直播点播
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="application" class="dropdown-title"><span class="title">application</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/application/" class="nav-link">
  application
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="偏硬件5G" class="dropdown-title"><span class="title">偏硬件5G</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/偏硬件5G/C++/" class="nav-link">
  C++
</a></li><li class="dropdown-item"><!----> <a href="/docs/偏硬件5G/汇编/" class="nav-link">
  汇编
</a></li><li class="dropdown-item"><!----> <a href="/docs/偏硬件5G/C/" class="nav-link">
  C
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="微信相关" class="dropdown-title"><span class="title">微信相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/微信相关/小程序/" class="nav-link">
  小程序
</a></li><li class="dropdown-item"><!----> <a href="/docs/微信相关/" class="nav-link">
  微信相关
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="webpack" class="dropdown-title"><span class="title">webpack</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/webpack/" class="nav-link">
  webpack
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>gitlab</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/基础设施/gitlab/0000-00-00-Gitlab日记.html" class="sidebar-link">【gitlab日记】</a></li><li><a href="/docs/基础设施/gitlab/2020-09-15-【gitlab-ci实践】springboot的编译部署.html" class="active sidebar-link">【gitla-ci发布实践】SpringBoot的编译部署</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/基础设施/gitlab/2020-09-15-【gitlab-ci实践】springboot的编译部署.html#现在开始配置gitlab" class="sidebar-link">现在开始配置gitlab</a></li><li class="sidebar-sub-header"><a href="/docs/基础设施/gitlab/2020-09-15-【gitlab-ci实践】springboot的编译部署.html#手动执行" class="sidebar-link">手动执行</a></li><li class="sidebar-sub-header"><a href="/docs/基础设施/gitlab/2020-09-15-【gitlab-ci实践】springboot的编译部署.html#提交代码触发pipeline" class="sidebar-link">提交代码触发Pipeline</a></li><li class="sidebar-sub-header"><a href="/docs/基础设施/gitlab/2020-09-15-【gitlab-ci实践】springboot的编译部署.html#_1-使用gitlabrunner充当发布用的服务器。比较容易，但是丑陋。" class="sidebar-link">1 使用GitlabRunner充当发布用的服务器。比较容易，但是丑陋。</a></li><li class="sidebar-sub-header"><a href="/docs/基础设施/gitlab/2020-09-15-【gitlab-ci实践】springboot的编译部署.html#_2-部署服务器和runner是不同的机器。这是比较正常" class="sidebar-link">2 部署服务器和Runner是不同的机器。这是比较正常</a></li><li class="sidebar-sub-header"><a href="/docs/基础设施/gitlab/2020-09-15-【gitlab-ci实践】springboot的编译部署.html#_3-服务器与runner是否是一台。不明！！" class="sidebar-link">3. 服务器与RUnner是否是一台。不明！！</a></li><li class="sidebar-sub-header"><a href="/docs/基础设施/gitlab/2020-09-15-【gitlab-ci实践】springboot的编译部署.html#ssh-keyscan-介绍" class="sidebar-link">ssh-keyscan 介绍</a></li></ul></li><li><a href="/docs/基础设施/gitlab/2020-09-25-【gitlab-ci编译部署】springboot知识点.html" class="sidebar-link">【springboot】gitlab-ci编译部署知识点</a></li><li><a href="/docs/基础设施/gitlab/2020-09-28-Gitlab-ci-Angular.html" class="sidebar-link">【gitlab-ci】【Angular】</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-GitLab【单机版】docker-compose部署.html" class="sidebar-link">【GitLab安装】Docker和docker-compose部署GitLab（第一天）</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-GitLab【单机版】docker-compose部署第二天.html" class="sidebar-link">【GitLab安装】Docker和docker-compose部署GitLab 单机版（第二天补记，成功经验）</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-Gitlab-Pages-Domain.html" class="sidebar-link">【gitlab pages】 设置域名</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-Gitlab-Pages-Runner.html" class="sidebar-link">【gitlab vuepress】 能够成功编译vuepress项目了</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-Gitlab-Runner编译springcloud项目.html" class="sidebar-link">【gitlab runner】编译springcloud项目</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-Gitlab-SharedRunner-GroupRunner.html" class="sidebar-link">【Gitlab Runner】 本地Gitlab服务器的shared runner 和 Group Runner的配置方法</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-Gitlab-团队使用Gitlab的流程.html" class="sidebar-link">【gitlab工作流】</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-Gitlab_Runner安装配置.html" class="sidebar-link">【GitlabRunner安装配置】</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-Gitlab使用自签名证书开启https.html" class="sidebar-link">【Gitlab配置】使用自签名证书开启Https</a></li><li><a href="/docs/基础设施/gitlab/2020-7-2-Gitlab协同开发.html" class="sidebar-link">【gitlab协同开发】</a></li><li><a href="/docs/基础设施/gitlab/2020-7-3-gitlabTroubleShooting.html" class="sidebar-link">【GitLab trouble shootting】（持续更新中）</a></li><li><a href="/docs/基础设施/gitlab/2020-8-10-GitlabRunner-neuxs-maven.html" class="sidebar-link">【how-to-use-gitlab-ci-with-nexus maven】</a></li><li><a href="/docs/基础设施/gitlab/2020-8-13-Gitlab-Runner使用nexus私服加速（一）.html" class="sidebar-link">【gitlab-ci-runner + nexus】加速docker下载 （一）IP</a></li><li><a href="/docs/基础设施/gitlab/2020-8-13-Gitlab-Runner使用nexus私服加速（二）.html" class="sidebar-link">【gitlab-runner + nexus】加速docker和npm下载 （二）nginx代理docker库ssl</a></li><li><a href="/docs/基础设施/gitlab/2020-8-13-gitlab日常维护.html" class="sidebar-link">【gitlab日常维护】</a></li><li><a href="/docs/基础设施/gitlab/2020-8-4-GitlabPages公司方案思考.html" class="sidebar-link">【gitlab pages】公司方案思考</a></li><li><a href="/docs/%E5%9F%BA%E7%A1%80%E8%AE%BE%E6%96%BD/gitlab/" aria-current="page" class="sidebar-link">gitlab EE 与 CE 的区别</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gitlab-ci发布实践之springboot部署"><a href="#gitlab-ci发布实践之springboot部署" class="header-anchor">#</a> gitlab-ci发布实践之Springboot部署</h1> <p>首先从SpringBoot官网上自动生成一个<a href="https://start.spring.io/" target="_blank" rel="noopener noreferrer">Demo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>
https://start.spring.io/
<img src="/docs/images/2020-09-25-09-19-22.png" alt=""></p> <p>然后，本地安装java11，使用Eclipse编辑该工程。
<img src="/docs/images/2020-09-25-09-34-14.png" alt="">
上传该工程到本地gitlab：<a href="https://gitlab.ccbjb.com.cn/shirongxin/gitlabci-springboot" target="_blank" rel="noopener noreferrer">gitlabci-springboot<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>编辑修改pom.xml,使用本地nexus maven仓库</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token prolog">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project</span> <span class="token attr-name">xmlns</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xmlns:</span>xsi</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://www.w3.org/2001/XMLSchema-instance<span class="token punctuation">&quot;</span></span>
	<span class="token attr-name"><span class="token namespace">xsi:</span>schemaLocation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>modelVersion</span><span class="token punctuation">&gt;</span></span>4.0.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>modelVersion</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.3.3.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span> <span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.example<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>0.0.1-SNAPSHOT<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">&gt;</span></span>Demo project for Spring Boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>11<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>


	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://nexus.ccbjb.com.cn/repository/maven-central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checksumPolicy</span><span class="token punctuation">&gt;</span></span>fail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>checksumPolicy</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>

		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>scope</span><span class="token punctuation">&gt;</span></span>test<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>scope</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusions</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>exclusion</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.junit.vintage<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>junit-vintage-engine<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusion</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>exclusions</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br></div></div><p>里面增加了一段：</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://nexus.ccbjb.com.cn/repository/maven-central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>always<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>updatePolicy</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>checksumPolicy</span><span class="token punctuation">&gt;</span></span>fail<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>checksumPolicy</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>编写.m2/settings.xml
<img src="/docs/images/2020-09-25-09-46-02.png" alt=""></p> <p>把里面shirx，123.com修改成你自己的用户名和密码。
公司所有人都有。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>settings</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>servers</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>shirx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>123.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus-release<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>shirx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>123.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>server</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus-snapshot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>username</span><span class="token punctuation">&gt;</span></span>shirx<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>username</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>password</span><span class="token punctuation">&gt;</span></span>123.com<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>password</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>server</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>servers</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrors</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirror</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>*<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrorOf</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Nexus myself<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://nexus.ccbjb.com.cn/repository/maven-central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirror</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>mirrors</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profiles</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>profile</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>mycof<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token comment">&lt;!-- 私有库地址 --&gt;</span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://nexus.ccbjb.com.cn/repository/maven-central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepositories</span><span class="token punctuation">&gt;</span></span>
				<span class="token comment">&lt;!--插件库地址 --&gt;</span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginRepository</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>nexus<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>http://nexus.ccbjb.com.cn/repository/maven-central/<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>releases</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>releases</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
						<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
					<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
				<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepository</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginRepositories</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profile</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>profiles</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--激活profile --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>activeProfile</span><span class="token punctuation">&gt;</span></span>mycof<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfile</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>activeProfiles</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>settings</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><p>编写Dockerfile放到最外层，和pom.xml同级</p> <div class="language-dockerfile line-numbers-mode"><pre class="language-dockerfile"><code><span class="token keyword">FROM</span> docker.ccbjb.com.cn/maven<span class="token punctuation">:</span>3.6.3<span class="token punctuation">-</span>jdk<span class="token punctuation">-</span>11<span class="token punctuation">-</span>slim AS MAVEN_BUILD
<span class="token keyword">ARG</span> SPRING_ACTIVE_PROFILE
<span class="token keyword">COPY</span> pom.xml /build/
<span class="token keyword">COPY</span> src /build/src/
<span class="token keyword">COPY</span> .m2 /build/.m2/
<span class="token keyword">WORKDIR</span> /build
<span class="token keyword">RUN</span> mvn <span class="token punctuation">-</span>s .m2/settings.xml <span class="token punctuation">-</span><span class="token punctuation">-</span>batch<span class="token punctuation">-</span>mode clean install <span class="token punctuation">-</span>Dspring.profiles.active=$SPRING_ACTIVE_PROFILE &amp;&amp; mvn <span class="token punctuation">-</span>s .m2/settings.xml <span class="token punctuation">-</span><span class="token punctuation">-</span>batch<span class="token punctuation">-</span>mode package <span class="token punctuation">-</span>B <span class="token punctuation">-</span>e <span class="token punctuation">-</span>Dspring.profiles.active=$SPRING_ACTIVE_PROFILE
<span class="token keyword">RUN</span> ls  /build/target/
<span class="token keyword">FROM</span> docker.ccbjb.com.cn/openjdk<span class="token punctuation">:</span>11<span class="token punctuation">-</span>slim
<span class="token comment">#FROM openjdk:8-alpine FOR JAVA 8</span>
<span class="token keyword">WORKDIR</span> /app
<span class="token keyword">COPY</span> <span class="token punctuation">-</span><span class="token punctuation">-</span>from=MAVEN_BUILD /build/target/*.jar /app/appdemo.jar
<span class="token keyword">ENTRYPOINT</span> <span class="token punctuation">[</span><span class="token string">&quot;java&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;-jar&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;appdemo.jar&quot;</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>编写.gitlab-ci.yml</p> <div class="language-yml line-numbers-mode"><pre class="language-yml"><code><span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> docker<span class="token punctuation">:</span>19.03.12<span class="token punctuation">-</span>dind
    <span class="token key atrule">command</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">&quot;--insecure-registry=docker.ccbjb.com.cn&quot;</span><span class="token punctuation">]</span>
  
<span class="token key atrule">stages</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> build
  <span class="token punctuation">-</span> deploy
  
<span class="token key atrule">variables</span><span class="token punctuation">:</span>
  <span class="token key atrule">MAVEN_CLI_OPTS</span><span class="token punctuation">:</span> <span class="token string">&quot;-s .m2/settings.xml --batch-mode&quot;</span>
  <span class="token key atrule">DOCKER_TLS_CERTDIR</span><span class="token punctuation">:</span> <span class="token string">&quot;/certs&quot;</span>

<span class="token key atrule">build</span><span class="token punctuation">:</span>
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> build
  <span class="token key atrule">before_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> source .$<span class="token punctuation">{</span>CI_COMMIT_REF_NAME<span class="token punctuation">}</span>.env
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> docker info
    <span class="token punctuation">-</span> echo $DOCKER_PASSWORD <span class="token punctuation">|</span> docker login <span class="token punctuation">-</span>u$DOCKER_USER docker.ccbjb.com.cn  <span class="token punctuation">-</span><span class="token punctuation">-</span>password<span class="token punctuation">-</span>stdin
    <span class="token punctuation">-</span> docker build <span class="token punctuation">-</span><span class="token punctuation">-</span>build<span class="token punctuation">-</span>arg SPRING_ACTIVE_PROFILE=$SPRING_ACTIVE_PROFILE <span class="token punctuation">-</span>t $DOCKER_REPO .
    <span class="token punctuation">-</span> docker push $DOCKER_REPO 

<span class="token comment"># login into another server，docker pull and run image to Container.</span>
<span class="token key atrule">deploy</span><span class="token punctuation">:</span>
  <span class="token key atrule">image</span><span class="token punctuation">:</span> docker.ccbjb.com.cn/ubuntu<span class="token punctuation">:</span>latest
  <span class="token key atrule">stage</span><span class="token punctuation">:</span> deploy
  <span class="token key atrule">before_script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> <span class="token string">'which ssh-agent || ( apt-get update -y &amp;&amp; apt-get install openssh-client -y &amp;&amp; apt-get install -qq sshpass)'</span>
    <span class="token punctuation">-</span> eval $(ssh<span class="token punctuation">-</span>agent <span class="token punctuation">-</span>s)
    <span class="token punctuation">-</span> ssh<span class="token punctuation">-</span>add &lt;(echo &quot;$SSH_PRIVATE_KEY&quot;)
    <span class="token punctuation">-</span> mkdir <span class="token punctuation">-</span>p ~/.ssh
    <span class="token punctuation">-</span> chmod 700 ~/.ssh
    <span class="token punctuation">-</span> echo <span class="token punctuation">-</span>e &quot;Host <span class="token important">*\n\tStrictHostKeyChecking</span> no\n\n&quot; <span class="token punctuation">&gt;</span> ~/.ssh/config
    <span class="token punctuation">-</span> source .$<span class="token punctuation">{</span>CI_COMMIT_REF_NAME<span class="token punctuation">}</span>.env
  <span class="token key atrule">script</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ssh root@$SERVER_IP &quot;docker login <span class="token punctuation">-</span>u $DOCKER_USER <span class="token punctuation">-</span>p $DOCKER_PASSWORD docker.ccbjb.com.cn; docker stop $APP_NAME; docker system prune <span class="token punctuation">-</span>a <span class="token punctuation">-</span>f; docker pull $DOCKER_REPO; docker container run <span class="token punctuation">-</span>d <span class="token punctuation">-</span><span class="token punctuation">-</span>name $APP_NAME <span class="token punctuation">-</span>p $PORT<span class="token punctuation">:</span>8080 <span class="token punctuation">-</span>e SPRING_PROFILES_ACTIVE=$SPRING_ACTIVE_PROFILE $DOCKER_REPO; docker logout&quot;
  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><p>编写master分支才需要的env文件，放到工程最外层。.master.env</p> <div class="language-properties line-numbers-mode"><pre class="language-properties"><code><span class="token attr-name">export</span> <span class="token attr-value">SPRING_ACTIVE_PROFILE='prod'</span>
<span class="token attr-name">export</span> <span class="token attr-value">DOCKER_REPO='docker.ccbjb.com.cn/library/demo_app:prod'</span>
<span class="token attr-name">export</span> <span class="token attr-value">APP_NAME='demo_app_prod'</span>
<span class="token attr-name">export</span> <span class="token attr-value">PORT='8080'</span>
<span class="token attr-name">export</span> <span class="token attr-value">SERVER_IP='192.168.3.123'</span>
<span class="token attr-name">export</span> <span class="token attr-value">SERVER_SSH_KEY=&quot;$SSH_PRIVATE_KEY&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>如此，则工程里的所有文件都配置完毕。</p> <h2 id="现在开始配置gitlab"><a href="#现在开始配置gitlab" class="header-anchor">#</a> 现在开始配置gitlab</h2> <p>先配置gitlab上runner。
为这个工程，注册一个runner的执行器为docker:19.03.12
docker.ccbjb.com.cn/docker:19.03.12也可以。</p> <div class="custom-block danger"><p class="custom-block-title">验证：</p> <p>据说docker:19.03.12从私有仓库下载会出现异常！需要验证。
答：验证了。没问题。参考：该issue。<a href="https://gitlab.ccbjb.com.cn/shirongxin/gitlabci-springboot/-/issues/16" target="_blank" rel="noopener noreferrer">docker执行器如果指定为私库docker.ccbjb.cm.cn/docker:19.03.12会出错吗？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <p>3.121上
/usr/local/docker/runner/config/config.toml
<img src="/docs/images/2020-09-25-11-17-21.png" alt="">
可见使用了86Hie_e2 执行器。</p> <div class="language-toml line-numbers-mode"><pre class="language-toml"><code><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token table class-name">runners</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
  <span class="token key property">name</span> <span class="token punctuation">=</span> <span class="token string">&quot;121 docker runner, docker:19.03.12&quot;</span>
  <span class="token key property">url</span> <span class="token punctuation">=</span> <span class="token string">&quot;https://gitlab.ccbjb.com.cn/&quot;</span>
  <span class="token key property">token</span> <span class="token punctuation">=</span> <span class="token string">&quot;86Hie_e2TTp4FUrx-PF7&quot;</span>
  <span class="token key property">executor</span> <span class="token punctuation">=</span> <span class="token string">&quot;docker&quot;</span>
  <span class="token punctuation">[</span><span class="token table class-name">runners.cache</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token table class-name">runners.cache.s3</span><span class="token punctuation">]</span>
    <span class="token punctuation">[</span><span class="token table class-name">runners.cache.gcs</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token table class-name">runners.docker</span><span class="token punctuation">]</span>
    <span class="token key property">tls_verify</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
    <span class="token key property">image</span> <span class="token punctuation">=</span> <span class="token string">&quot;docker:19.03.12&quot;</span>
    <span class="token key property">privileged</span> <span class="token punctuation">=</span> <span class="token boolean">true</span>
    <span class="token key property">disable_entrypoint_overwrite</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
    <span class="token key property">oom_kill_disable</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
    <span class="token key property">disable_cache</span> <span class="token punctuation">=</span> <span class="token boolean">false</span>
    <span class="token key property">volumes</span> <span class="token punctuation">=</span> <span class="token punctuation">[</span><span class="token string">&quot;/certs/client&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/cache&quot;</span><span class="token punctuation">]</span>
    <span class="token key property">shm_size</span> <span class="token punctuation">=</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><code>image = &quot;docker:19.03.12&quot;</code> 修改成<code>image = &quot;docker.ccbjb.com.cn/docker:19.03.12&quot;</code></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token builtin class-name">cd</span> /root/gitlab-runner/
docker-compose down
docker-compose up -d
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>然后，配置变量
<img src="/docs/images/2020-09-25-10-06-20.png" alt="">
DOCKER_AUTH_CONFIG
<a href="https://gitlab.ccbjb.com.cn/shirongxin/gitlabci-springboot/-/issues/15" target="_blank" rel="noopener noreferrer">DOCKER_AUTH_CONFIG到底有没有用，有啥用？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>Runner上已经登陆了docker.ccbjb.com.cn
.docker/config.json里面已经有了两个docker仓库的登陆信息。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>[root@centos121 ~]#cd .docker
[root@centos121 .docker]#ls
config.json  docker.ccbjb.com.cn  harbor.ccbjb.com.cn  nexus.ccbjb.com.cn
[root@centos121 .docker]#cat config.json
        &quot;auths&quot;: {
                &quot;docker.ccbjb.com.cn&quot;: {
                        &quot;auth&quot;: &quot;YWRtaW46YWRtaW4xMjM=&quot;
                },
                &quot;harbor.ccbjb.com.cn&quot;: {
                        &quot;auth&quot;: &quot;YWRtaW46MTIzNC5jb01u&quot;
                }
        },
        &quot;HttpHeaders&quot;: {
                &quot;User-Agent&quot;: &quot;Docker-Client/19.03.12 (linux)&quot;
        }
}[root@centos121 .docker]#
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><ul><li>docker.ccbjb.com.cn的用户名和密码。
DOCKER_USER, 你自己的。CJB公司的用户名就是你的邮件@前面的字母。
DOCKER_PASSWORD</li></ul> <h2 id="手动执行"><a href="#手动执行" class="header-anchor">#</a> 手动执行</h2> <p>在3.121上手动执行</p> <p>ssh-keygen -t rsa -f ~/.ssh/id_rsa -C &quot;shirx@ccbjb.com.cn&quot;  ，不输入密码（一路回车）
3.121上的私钥id_rsa 设置成gitlabUI的变量SSH_PRIVATE_KEY</p> <p>ssh-copy-id -i ~/.ssh/id_rsa.pub 192.168.3.123</p> <h2 id="提交代码触发pipeline"><a href="#提交代码触发pipeline" class="header-anchor">#</a> 提交代码触发Pipeline</h2> <p>就可以自动编译了部署了。
<img src="/docs/images/2020-09-25-14-20-57.png" alt=""></p> <h1 id="troubleshooting"><a href="#troubleshooting" class="header-anchor">#</a> TroubleShooting:</h1> <div class="custom-block warning"><p class="custom-block-title">重要</p> <p><a href="https://gitlab.ccbjb.com.cn/shirongxin/gitlabci-springboot/-/issues/14" target="_blank" rel="noopener noreferrer">终于好用了。<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://gitlab.ccbjb.com.cn/shirongxin/gitlabci-springboot/-/issues/16" target="_blank" rel="noopener noreferrer">docker执行器如果指定为私库docker.ccbjb.cm.cn/docker:19.03.12会出错吗？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://gitlab.ccbjb.com.cn/shirongxin/gitlabci-springboot/-/issues/15" target="_blank" rel="noopener noreferrer">DOCKER_AUTH_CONFIG到底有没有用，有啥用？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://gitlab.ccbjb.com.cn/shirongxin/gitlabci-springboot/-/issues?scope=all&amp;utf8=%E2%9C%93&amp;state=all" target="_blank" rel="noopener noreferrer">TroubleShooting<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/aabbcc456aa/article/details/18981279" target="_blank" rel="noopener noreferrer">ssh-key<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://gitlab.com/gitlab-cd/ssh-template" target="_blank" rel="noopener noreferrer">github上一套非常好的ssh远程发布的gitlab-ci模板（ssh-template）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://gitlab.com/gitlab-examples/ssh-private-key/-/issues/1#note_48526556" target="_blank" rel="noopener noreferrer">这是sshkeyRunner免密登陆服务器的时候产生的错误。<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <hr> <h1 id="其他参考资料："><a href="#其他参考资料：" class="header-anchor">#</a> 其他参考资料：</h1> <div class="language- line-numbers-mode"><pre class="language-text"><code>ssh-keygen -t rsa -f ~/.ssh/id_rsa -C &quot;shoufeng&quot;
echo -e &quot;Host *\n\tStrictHostKeyChecking no\n\n&quot; &gt; ~/.ssh/config
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><code>ssh-copy-id -i ~/.ssh/id_rsa.pub remote-host</code></p> <p><a href="https://www.cnblogs.com/zhihuifan10/p/11114816.html" target="_blank" rel="noopener noreferrer">webhook 是啥？<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a href="https://blog.csdn.net/java060515/article/details/84065083?utm_medium=distribute.pc_relevant.none-task-blog-title-2&amp;spm=1001.2101.3001.4242" target="_blank" rel="noopener noreferrer">nodejs的自动化编译和deploy（还挺靠谱）<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_1-使用gitlabrunner充当发布用的服务器。比较容易，但是丑陋。"><a href="#_1-使用gitlabrunner充当发布用的服务器。比较容易，但是丑陋。" class="header-anchor">#</a> 1 使用GitlabRunner充当发布用的服务器。比较容易，但是丑陋。</h2> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Runner和部署服务器是一台。整体思路就不推荐这么做。</p></div> <ul><li><p>https://blog.csdn.net/qq_27520051/article/details/80552220</p> <ul><li>代码从gitlab pull下来就完成了发布。</li></ul></li> <li><p>https://www.jianshu.com/p/b1e098cdb46b</p> <ul><li>在gitlab-runner上git pull代码，并编译。</li></ul></li> <li><p>https://blog.csdn.net/junmoxi/article/details/82762413</p> <ul><li>gitlab-ci.yml全是echo，没有一句真的。但是告诉你思路应该是Runner上执行shell。</li> <li>就这还需要把Runner服务器上生成公钥，放到gitlab上。就是为了git pull到runner上。</li></ul></li> <li><p>https://www.cnblogs.com/hongsusu/p/10142428.html</p> <ul><li>gitlabrunner上git pull代码（为了能pull还得把gitlabrunner的key放到gitlab的某个用户的SSH key里。）</li> <li>【疑问】git pull了代码就完成部署了吗？</li></ul></li> <li><p>https://segmentfault.com/a/1190000015692830</p> <ul><li>就是npm publish然后把用户名，密码都写道脚本里，发布到npm仓库（私有或公有），就发布完了。</li> <li>这明显只适合npm包的开发工作。</li></ul></li></ul> <h3 id="_1-2-gitlab-ci-docker化部署"><a href="#_1-2-gitlab-ci-docker化部署" class="header-anchor">#</a> 1.2 gitlab-ci Docker化部署</h3> <h4 id="_1-2-1-使用docker镜像库。build就是上传镜像，deploy就是拉取镜像并生成容器"><a href="#_1-2-1-使用docker镜像库。build就是上传镜像，deploy就是拉取镜像并生成容器" class="header-anchor">#</a> 1.2.1  使用docker镜像库。build就是上传镜像，deploy就是拉取镜像并生成容器</h4> <ul><li>https://www.jianshu.com/p/dc603463ef55
<ul><li>build就是在RUnner上编译，并上传docker镜像库</li> <li>deploy就是在Runner上拉取镜像并生成了容器，使用docker-compose或不使用（直接docker run）</li></ul></li></ul> <h4 id="_1-2-2-没使用docker镜像仓库。build就是打包成镜像。deploy就是在runner上生成镜像。"><a href="#_1-2-2-没使用docker镜像仓库。build就是打包成镜像。deploy就是在runner上生成镜像。" class="header-anchor">#</a> 1.2.2 没使用docker镜像仓库。build就是打包成镜像。deploy就是在runner上生成镜像。</h4> <ul><li>https://www.jianshu.com/p/c398509f8861
<ul><li>根本不用docker镜像仓库。就是在runner上直接打包成镜像。然后删除正在运行的容器。docker run生成容器。</li></ul></li> <li>https://www.cnblogs.com/luffyxin/p/12800889.html
<ul><li>同上。Runner上build阶段build镜像，deploy生成容器。</li> <li>不是很好的方案</li></ul></li></ul> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>Runner和部署服务器是一台。整体思路就不推荐这么做。</p></div> <hr> <h2 id="_2-部署服务器和runner是不同的机器。这是比较正常"><a href="#_2-部署服务器和runner是不同的机器。这是比较正常" class="header-anchor">#</a> 2 部署服务器和Runner是不同的机器。这是比较正常</h2> <h3 id="_2-1-非docker化部署"><a href="#_2-1-非docker化部署" class="header-anchor">#</a> 2.1 非docker化部署</h3> <ul><li>https://segmentfault.com/a/1190000020622168
<ul><li>这是一篇比较完整的gitlab-ci发布到服务器的配置。runner上编译。编译后的东西拷贝到服务器。服务器不是Runner</li> <li>把Runner上生成的公钥拷贝到另一台服务器的~/.ssh/authorized_keys文件中。</li> <li>【常识】gitlab-ci的头部，可以写一些设置npm代理仓库。不知道能不能登陆仓库。</li> <li>ssh到另一台服务器，采用了不验证服务器公钥的方式。见下面链接。</li> <li>https://blog.csdn.net/aabbcc456aa/article/details/18981279
<ul><li>【不用公钥验证的自动】不检查远端主机的公钥。</li></ul></li></ul></li></ul> <h3 id="_2-2-docker化部署，三个分支分别部署到三个不同的服务器。相当靠谱。"><a href="#_2-2-docker化部署，三个分支分别部署到三个不同的服务器。相当靠谱。" class="header-anchor">#</a> 2.2 docker化部署，三个分支分别部署到三个不同的服务器。相当靠谱。</h3> <ul><li>https://blog.csdn.net/fly910905/article/details/106425489/
<ul><li>这里面的maven:3.6.3-jdk-11-slim既有maven又有java。</li> <li>这篇文章值得参考。</li></ul></li> <li>https://www.kubernetes.org.cn/7522.html（和上面是一篇文章。）
<ul><li>相当成熟的方案。runner和部署服务器分开。并且三个分支部署到三个不同的服务器。相当靠谱。</li> <li>同样。build就是编译工程。</li> <li>build imag就是制作镜像并上传docker私有仓库。</li> <li>deploy就是到对应的服务器上下载镜像。并停止掉旧的容器，生成新的容器。</li></ul> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>这是相当靠谱的方案！思路就应该是这个思路。</p></div></li></ul> <hr> <h2 id="_3-服务器与runner是否是一台。不明！！"><a href="#_3-服务器与runner是否是一台。不明！！" class="header-anchor">#</a> 3. 服务器与RUnner是否是一台。不明！！</h2> <ul><li>https://segmentfault.com/a/1190000021092024?utm_source=tag-newest
<ul><li>就是npm run deploy , 这就算发布了？疑问！</li></ul></li></ul> <hr> <h2 id="ssh-keyscan-介绍"><a href="#ssh-keyscan-介绍" class="header-anchor">#</a> ssh-keyscan 介绍</h2> <p>相关命令：ssh,sshd,ssh-keygen
ssh-keyscan命令是一个收集大量主机公钥的使用工具。</p> <p>常用参数:</p> <p>-4：强制使用IPv4地址；
-6：强制使用IPv6地址；
-f：从指定文件中读取“地址列表/名字列表”；
-p：指定连接远程主机的端口；
-T：指定连接尝试的超时时间；
-t：指定要创建的密钥类型；
-v：信息模式，打印调试信息。
最后更新 2014-08-21 17:55:47
合作编辑者如下：张映有误，我来改正
(0)正确
(0)收藏
(0)
例1</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@localhost test1<span class="token punctuation">]</span><span class="token comment"># ssh-keyscan 192.168.10.203   #查看连接203服务器的公钥</span>
<span class="token comment"># 192.168.10.203 SSH-2.0-OpenSSH_5.3</span>
<span class="token number">192.168</span>.10.203 ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAqd3IqcRVwNhp2fSLwh5nHxrkyW4sTOmu6adt6ITjEP7bpSVw/bQucLaojLSUwMiOjjcdr5vJnuc3AGYyfulMJ86QsTAyw4TCtv5ECJD80vNrxh30KDNf6nGlj6ynDmTU0cCFltv2gJVQVOSNuPfR41F786Q+zLblp+8jzYbZA+0ite+qrr56ODRYRedw6hYo/+FWNAPVi+prefH0X8t7RnZ17044Jq2Vzs4p1lI9gL3Leook+r93Kg6FSmIQGOEbFiEMim7xHY+t+K5kfpuxfSskuq0qUZaI6gB4Fab131UibLvr6QDIerkDUOZ2OAZpxnreAqM0qcMKp03HO+6TKw<span class="token operator">==</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">9/25/2020, 2:32:40 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/基础设施/gitlab/0000-00-00-Gitlab日记.html" class="prev">
        【gitlab日记】
      </a></span> <span class="next"><a href="/docs/基础设施/gitlab/2020-09-25-【gitlab-ci编译部署】springboot知识点.html">
        【springboot】gitlab-ci编译部署知识点
      </a>
      →
    </span></p></div>  <!----></main></div><div class="global-ui"><!----></div></div>
    <script src="/docs/assets/js/app.b0b4daf6.js" defer></script><script src="/docs/assets/js/5.379e7eff.js" defer></script><script src="/docs/assets/js/2.28087ae7.js" defer></script><script src="/docs/assets/js/67.69b9b0a8.js" defer></script><script src="/docs/assets/js/3.32492e15.js" defer></script>
  </body>
</html>
